/** @typedef {import('../../ChoreoGraph/3.2.1/types/choreograph') } ChoreoGraphCore */
/** @typedef {import('../../ChoreoGraph/3.2.1/types/develop') } ChoreoGraphDevelop */
/** @typedef {import('../../ChoreoGraph/3.2.1/types/input') } ChoreoGraphInput */
/** @typedef {import('../../ChoreoGraph/3.2.1/types/audio') } ChoreoGraphAudio */
/** @typedef {import('../../ChoreoGraph/3.2.1/types/animation') } ChoreoGraphAnimation */
/** @typedef {import('../../ChoreoGraph/3.2.1/types/animationeditor') } ChoreoGraphAnimationEditor */
/** @typedef {import('../../ChoreoGraph/3.2.1/types/blockcontroller') } ChoreoGraphBlockController */

const rawAnimations = {
  "pod_uC" : [[1400,358,0,260]], // top left, Escape Pod Up Charlie/Delta/Echo/Foxtrot
  "pod_uD" : [[1408,431,0,270]], // bottom left
  "pod_uE" : [[1516,358,0,100]], // top right
  "pod_uF" : [[1508,431,0,90]], // bottom right
  "pod_dC" : [[813,358,0,260]], // top left, Escape Pod Down Wait 0
  "pod_dD" : [[821,431,0,270]], // bottom left
  "pod_dE" : [[929,358,0,100]], // top right
  "pod_dF" : [[921,431,0,90]], // bottom right

  // Escape pod down drop Charlie/Delta/Echo/Foxtrot
  "pod_ddC" : [[813,358,0,260],[809,359,0.9,260],[809,359,0.9,260],[809,359,1,255],[809,359,0.8,250],[809,359,0.8,265],[809,359,1.1,255],[809,359,0.5,255],[809,359,1,270],[809,359,3,250],[809,359,1.2,260],[809,359,1,265],[809,359,1.2,255],[809,359,1,265],[809,359,1.5,270],[809,359,0.2,265],[809,359,2.8,250],[809,359,1.1,260],[813,358,1.5,260]],
  "pod_ddD" : [[821,431,0,270],[817,431,0.9,270],[817,431,0.9,270],[817,431,1,265],[817,431,0.8,260],[817,431,0.8,275],[817,431,1.1,265],[817,431,0.5,265],[817,431,1,280],[817,431,3,260],[817,431,1.2,270],[817,431,1,275],[817,431,1.2,265],[817,431,1,275],[817,431,1.5,280],[817,431,0.2,275],[817,431,2.8,260],[817,431,1.1,270],[821,431,1.5,270]],
  "pod_ddE" : [[929,358,0,100],[933,359,0.9,100],[933,359,0.9,100],[933,359,1,95],[933,359,0.8,90],[933,359,0.8,105],[933,359,1.1,95],[933,359,0.5,95],[933,359,1,100],[933,359,3,90],[933,359,1.2,100],[933,359,1,105],[933,359,1.2,95],[933,359,1,105],[933,359,1.5,110],[933,359,0.2,105],[933,359,2.8,90],[933,359,1.1,100],[929,358,1.5,100]],
  "pod_ddF" : [[921,431,0,90],[925,431,0.9,90],[925,431,0.9,90],[925,431,1,85],[925,431,0.8,80],[925,431,0.8,95],[925,431,1.1,85],[925,431,0.5,85],[925,431,1,90],[925,431,3,80],[925,431,1.2,90],[925,431,1,95],[925,431,1.2,85],[925,431,1,95],[925,431,1.5,100],[925,431,0.2,95],[925,431,2.8,80],[925,431,1.1,90],[921,431,1.5,90]],
  "pod_udC" : [],
  "pod_udD" : [],
  "pod_udE" : [],
  "pod_udF" : [],

  "bb80_on" : [[342,360,,180],[342,360,1,160],[342,360,2,160],[342,360,2,190],[340,361,3,170],[340,361,3,150],[342,360,3,160],[342,360,1,180]],
  "bb80_to_off" : [[342,360,,180],[342,360,1,260],[328,364,4,200]],
  "bb80_to_on" : [[328,364,,200],[342,360,6,180]],
  "bb80_off" : [[328,364,,200]],

  "bb81_on" : [[313,468,,0],[313,468,1,20],[313,468,2,20],[313,468,2,-10],[311,466,3,10],[311,466,3,30],[313,468,3,20],[313,468,1,0]],
  "bb81_to_off" : [[313,468,,0],[313,468,1,-45],[303,458,4,-45]],
  "bb81_to_on" : [[303,458,,-45],[313,468,6,0]],
  "bb81_off" : [[303,458,,-45]],

  "bb8_xwing" : [[382,532,0,20],[382,532,2,100],[382,532,1,100],[382,532,2,40],[382,532,1,30],[382,532,1,20]],

  "q0-rep0" : [[1023,300],["s",1.2],[1022,288],["s",1.5],[1022,281],[1022,274],[1026,265],[1034,261],["s",1.2],[1042,265],["s",1],[1045,270]],
  "q0-rep1" : [[1023,300],["s",1.2],[1022,288],["s",1.5],[1022,283],["s",1.7],[1021,274],[1015,263],[1002,260],["s",1.5],[993,265],["s",1.2],[990,270]],

  "q1-q0" : [[1050,323,0,310],["s",1.2],[1023,300,,360]],
  "q2-q1" : [[1052,360,0,360],[1050,323,,310]],
  "q3-q2" : [[1052,395,0,0],[1052,360,,0]],
  "q4-q3" : [[1040,435,0,-90],[1052,395,,0]],
  "q5-q4" : [[1010,463,0,225],[1040,435,,270]],
  "q6-q5" : [[988,498,0,210],[1010,463,,225]],
  "q7-q6" : [[970,529,0,210],[988,498,,210]],
  "q8-q7" : [[946,562,,250],[970,529,,210]],
  "q9-q8" : [[910,565,,270],["s",1],[946,562,,250]],

  "add_wait_f" : [[1080,412,,-90]],
  "add_wait_b" : [[1110,412,,-90]],

  "add_wait_b-f" : [[1110,412,,-90],[1080,412,,-90]],
  "to_add" : [[1350,429,,-90],["s",1.2],[1290,429,,-90]],
  "add" : [[1290,429,,-90],["s",1.2],[1208,429],[1190,427],[1166,421],[1144,415],["s",1],[1121,412],["s",0.8],[1110,412,,-90]],
  "add_wait_f-q3" : [[1080,412,,-90],[1068,411,,-70],[1060,408,,-40],[1054,402,,-10],[1052,395,,0]],

  "remove" : [[1040,435,,-90],[1048,434],[1064,432],[1074,428],[1079,422],[1086,416],[1095,413],[1110,412,,-90],[1121,412],[1144,415],[1166,421],[1190,427],[1208,429],[1290,429]],

  // Load Number Front/Back Dispatch/Return
  "l0fd" : [[1050,109,,20],["s",0.5],[1049.5,113],["s",0.8],[1049,117.74],["s",1],[1048,126.08],["s",1.5],[1046,134.01],[1044,141.84,,15],[1039.43,149.92,,5],[1032.23,158.58,,-10],[1024.37,167.94,,-35],[1016.78,177.87,,-60],["s",0.8],[1010.37,188.01,,-90],["s",1],[1005.93,197.79,,-100],["s",0.8],[1004.05,206.45],["s",0.6],[1005.1,213.18,,-90],[1009.14,217.17,,-70],[1015.91,217.81,,-40],[1024.81,214.78,,-5],["s",1.1],[1034.99,208.29,,25],[1045.49,199.22,,50],[1055.57,189.42,,75],[1065.24,184,,85],[1076,182,,90]],
  "l0bd" : [[1059,78,,-5],["s",1],[1059,78,0.5],["s",0.5],[1058.5,81],["s",0.8],[1058,84],["s",1],["a","d-a"],[1055.61,94.86],["s",1.5],[1052.24,108.95],[1048.81,120.9],["s",1.2],[1045.43,131.25,,-10],["s",1],[1042.28,140.48,,-20],["s",0.6],[1039.71,148.93,,-35],["s",0.4],[1038.09,156.82,,-60],[1037.9,164.19,,-80],["s",0.8],[1039.63,170.92,,-90],["s",1],[1043.81,176.66],[1050.95,180.85],[1061.53,182.67],[1076,182,,-90]],
  "l1fd" : [[957,109,,375],["s",0.5],[956,115],["s",0.8],[955.41,118.98],["a","d-a"],["s",1],[954.02,128.94,,360],["s",1.2],[953.07,138.53,,350],[952.82,147.47,,330],[953.53,155.53,,300],[955.48,162.56,,260],[958.93,168.44,,220],[964.18,173.14,,195],[971.5,176.68,,190],[981.2,179.12,,185],["s",1.5],[993.57,180.62,,180],[1008.92,181.37,,190],[1027.56,181.63,,200],["s",1.2],[1049.81,181.71,,230],[1076,182,,270]],
  "l1bd" : [[960,78,,340],["s",1],[960,78,0.5],["s",0.5],[959.5,83,,340],["s",0.8],[958.5,93],["s",1],[957,109],[955.41,118.98],["s",1.2],[954.02,128.94],["s",1],[953.07,138.53,,330],[952.82,147.47,,310],["s",1.3],[953.53,155.53,,280],[955.48,162.56,,260],["s",1.2],[958.93,168.44,,250],["s",1],[964.18,173.14,,245],["s",1.2],[971.5,176.68],[981.2,179.12,,240],["s",1.3],[993.57,180.62,,225],["s",1.5],[1008.92,181.37,,215],[1027.56,181.63,,180],["s",1.3],[1049.81,181.71,,130],["s",1.2],[1076,182,,90]],
  "l2fd" : [[894,167,,70],["s",0.5],[898,167],["s",0.8],[907.07,167.65],["s",1],[920.21,168.58,,80],["s",1.5],[933.35,170.69,,100],[946.44,174.27,,130],[959.44,179.08,,160],[972.33,184.56,,190],[985.08,189.93,,195],["s",1.2],[997.69,194.36,,185],["s",1],[1010.1,197.08,,165],["s",0.9],[1022.29,197.58,,170],["s",1],[1034.17,195.68,,190],[1045.64,191.75,,210],[1056.56,186.79,,240],[1066.76,184,,260],[1076,182,,270]],
  "l2bd" : [[864,164,,100],["s",1],[864,164,0.5],["s",0.5],[870,165],["s",0.9],[880,166],["a","d-a"],["s",1.2],[894,167],["s",1.5],[907.07,167.65,,105],[920.21,168.58,,110],[933.35,170.69,,130],[946.44,174.27,,160],["s",1.2],[959.44,179.08,,180],["s",1],[972.33,184.56,,210],["s",0.8],[985.08,189.93,,220],[997.69,194.36,,230],["s",0.8],[1010.1,197.08,,250],["s",1],[1022.29,197.58,,280],["s",1.2],[1034.17,195.68,,320],[1045.64,191.75,,370],[1056.56,186.79,,410],[1066.76,184,,430],[1076,182,,450]],
  "l3fd" : [[894,263,,70],["s",0.7],[898,263,,75],["s",1.1],[907.66,262.91,,82],["s",1.3],[919.21,262.35,,85],["a","d-a"],["s",1.5],[930.06,260.91,,80],[941.09,258.29,,60],[952.73,254.31,,40],["s",1.4],[965.08,248.88,,30],["s",1.2],[977.97,242.04,,20],["s",1],[991.1,233.92,,10],[1004.1,224.82,,0],["s",1.1],[1016.65,215.13,,-10],["s",1.2],[1028.55,205.4,,-20],["s",1.5],[1039.85,196.32,,-30],[1050.9,188.71,,-50],["s",1.35],[1062.52,183.55,,-70],["s",1.2],[1076,182,,-90]],
  "l3bd" : [[864,262,,95],["s",1],[864,262,0.6],["s",0.8],[870,262,,90],["s",1],[894,263,,80],["s",1.2],[907.66,262.91,,60],[919.21,262.35,,40],["s",1.5],[930.06,260.91,,30],["s",1.2],[941.09,258.29,,20],[952.73,254.31,,10],[965.08,248.88,,0],[977.97,242.04,,-10],["s",1],[991.1,233.92,,-20],[1004.1,224.82,,-30],["s",1],[1016.65,215.13,,-40],["s",1.2],[1028.55,205.4,,-35],["s",1.55],[1039.85,196.32,,-15],[1050.9,188.71,,10],[1062.52,183.55,,60],["s",1.2],[1076,182,,90]],

  "l0fr" : [[990,270,,0],["s",0.6],[989,265,,5],["s",1],[986,255,,10],["s",1.5],[983.54,246.16,,20],[978.31,225.33,,35],["s",1],[974.64,207.84,,60],["s",0.8],[972.9,193.76,,80],[973.33,182.99,,90],[976.04,175.26,,100],[980.93,170.12,,105],[987.7,167,,115],[995.9,165.24,,130],[1004.98,164.1],[1014.3,162.84],[1023.29,160.72,,125],["s",1],[1031.43,157.1,,115],["s",1.3],[1038.35,151.46,,100],[1043.9,143.47,,70],[1048.11,133.04,,40],[1051.25,120.41,,10],[1053.77,106.21,,-5],[1056.18,91.53],["s",1],[1058,85],["s",0.8],[1059,78,,-5]],
  "l0br" : [[1045,270,,0],["s",0.8],[1040,269,,5],["s",1],[1023.9,266.07,,18],[1005.87,256.33,,30],[991.28,243.35,,60],["s",0.8],[980.33,229.12,,80],[973.1,215.09,,90],[969.5,202.28,,100],[969.34,191.27,,110],[972.28,182.34,,120],[977.85,175.48,,130],[985.52,170.45,,140],[994.64,166.87],[1004.56,164.2],["s",1],[1014.6,161.86,,120],["s",1.5],[1024.11,159.24,,100],[1032.52,155.72,,70],[1039.38,150.75,,50],[1044.43,143.86,,40],["s",1.2],[1047.63,134.71,,30],["s",1],[1049.27,123.1,,25],["s",0.8],[1050,109,,20]],
  "l1fr" : [[990,270],["s",1],[990,270,2],["s",0.8],[993.54,246.75,,-5],["s",1],[994.99,232.44,,-10],[993.82,224.23],[989.78,219.98,,-5],[983.16,217.96,,5],[974.78,216.68,,20],[965.71,214.85,,30],[957.08,211.51],[949.86,206.1,,25],["s",1.5],[944.72,198.51,,30],[941.97,189.07,,40],[941.55,178.44,,60],["s",1.2],[943.05,167.48],[945.87,156.99,,60],["s",1],[949.25,147.42,,40],[952.5,138.66,,25],[955.11,129.76,,5],["s",0.8],[956.95,118.83,,-5],[958.36,102.91,,-15],[960,82,,-20],["s",0.5],[960,78]],
  "l1br" : [[1045,270],["s",1],[1045,270,2],["s",0.8],[1044.66,256.18,,-5],["s",1],[1043.96,245.09,,-10],[1042.47,236.43,,-15],[1039.79,229.87,,-18],[1035.47,225.09],[1029.11,221.76],[1020.28,219.58,,-5],[1008.57,218.22,,0],[993.54,217.36,,20],[974.78,216.68,,30],[965.71,214.85,,35],[957.08,211.51,,40],[949.86,206.1,,45],[944.72,198.51,,55],[941.97,189.07,,60],[941.55,178.44],[943.05,167.48,,50],[945.87,156.99,,40],[949.25,147.42,,30],["s",0.8],[952.5,138.66,,20],[954,129.76,,10],[956,119,,0],[957,112,,15],["s",0.5],[957,109]],
  "l2fr" : [[990,270],["s",1],[990,270,1],["s",0.4],[988.5,265,,-5],["s",0.5],[985.17,253.72,,-10],["s",0.6],[979.07,239.52],[972.16,226.66,,0],[964.79,214.77,,20],["s",0.7],[957.18,203.76,,40],["s",1],[949.46,193.74,,60],[941.69,184.93,,80],[933.84,177.6,,90],["s",1.3],[925.8,172.01,,95],[917.44,168.26,,100],["s",1],[908.58,166.31],["s",0.8],[899.02,165.81],[888.55,166.08],[876.94,166.01],[870,165],["s",0.6],[864,164,,100]],
  "l2br" : [[1045,270,,0],["s",1],[1045,270,3,-5],["s",0.6],[1045,265,,-10],["s",0.8],[1044.06,250.12,,-20],[1042.42,238.58],[1038.31,232.91],[1030.41,230.73,,0],["s",0.6],[1018.38,229.55,,10],[1002.96,227.13,,30],["s",0.8],[985.75,221.91,,50],["s",1],[968.73,213.44,,80],["s",1.3],[953.77,202.42,,100],["s",1.5],[942.04,190.52],[933.7,179.79,,90],[927.55,171.99,,80],["s",1.3],[921.17,167.84,,75],["s",1],[911.19,166.7,,70],["s",0.8],[900,167],["s",0.6],[894,167]],
  "l3fr" : [[990,270,,0],["s",1],[1010.63,251,,-20],["s",1.3],[1023.23,233.76,,-50],["s",1.5],[1028.21,217.87,,-70],[1026.74,203.94,,-90],["s",1.2],[1020.4,192.92,,-120],["s",1],[1010.86,185.69,,-150],[999.71,182.81,,-170],[988.28,184.41,,-200],[977.58,190.15,,-240],[968.23,199.23,,-250],[960.48,210.55,,-270],[954.2,222.85,,-280],[948.97,234.85,,-285],["s",1.2],[944.12,245.42],[938.78,253.76,,-280],[931.9,259.47,,-275],[922.35,262.6,,-270],[908.83,263.6,,-268],[889.94,263.17,,-265],[880,262],["s",1],[868,262],["s",0.6],[864,262]],
  "l3br" : [[1045,270,,0],["s",1],[1045,270,3.5],["s",0.8],[1045.07,258.48,,-5],["s",1],[1045.06,245.74,,-15],["s",1.2],[1044.66,232.5,,-30],["s",1.5],[1043.61,219.4,,-50],[1041.69,207.04,,-80],[1038.74,195.93,,-110],["s",1.3],[1034.64,186.54,,-140],["s",1],[1029.3,179.29,,-160],[1022.71,174.52,,-170],[1014.88,172.52,,-180],[1005.87,173.52,,-190],[995.8,177.69,,-200],["s",1.2],[984.82,185.13,,-215],[973.14,195.91,,-230],[961,210,,-250],[954.2,222.85,,-260],[948.97,234.85,,-270],[944.12,245.42,,-275],[938.78,253.76,,-280],[931.9,259.47,,-285],[922.35,262.6,,-290],[908.83,263.6],["s",1],[905,263],["s",0.8],[900,263],["s",0.6],[894,263]],

  "u0d" : [[750,612,0,270],["s",0.8],[750,580,,270],["s",1.1],[755,570,,270],["s",1.3],[765,565,,270],[880,565,,270],[900,565,,270],["s",1],["c","object.scene='RETURN'"],[910,565]],
  "u1d" : [[790,612,0,270],["s",0.8],[790,580,,270],["s",1.1],[795,570,,270],["s",1.4],[805,565,,270],[880,565,,270],[900,565,,270],["s",1],["c","object.scene='RETURN'"],[910,565]],
  "u2d" : [[830,612,0,270],["s",0.8],[830,580,,270],["s",1],[835,570,,270],["s",1.2],[845,565,,270],[880,565,,270],[900,565,,270],["s",1],["c","object.scene='RETURN'"],[910,565]],
  "u3d" : [[870,612,0,270],["s",0.8],[870,580,,270],["s",1.1],[875,570,,270],["s",1.4],[885,565,,270],[900,565,,270],["s",1],["c","object.scene='RETURN'"],[910,565]],

  // f = front, b = back, l = left, r = right

  "probe_f" : [[1076,182,0,270],["b","probe"],["c","object.scene='10'"],["s",1],[1050+46,182,,260],["s",1.1],[1058+46,178,,250],["s",1.5],[1060+46,170,,245],[1060+46,140,,200],[1060+46,130,,200],[1060+46,110,,250],[1060+46,100,,285],["s",1],[1060+46,90,,320],["s",0.9],[1059+46,78,,345],["s",0.7],[1058+46,73,,347],["s",0.4],[1058+46,69,,350],["s",1],[1058+46,69,1,350],["s",0.7],[1059+46,78,,345],["s",1],[1060+46,90,,320],["s",1.3],[1066+46,98,,310],["s",1.5],[1075+46,100,,300],["s",1.7],[1120+33,100,,340],["s",1.6],[1135+33,101,,350],[1143+33,97,,360],["s",1.4],[1149+33,92],["s",1.2],[1154+33,84],[1154+33,79],["s",0.8],[1154+33,75,,360]],

  "probe_b" : [[1076,182,0,90],["b","probe"],["c","object.scene='10'"],["s",1],[1050+46,182,,80],["s",1.1],[1058+46,178,,60],["s",1.5],[1060+46,170,,40],[1060+46,140,,10],[1060+46,130,,0],[1060+46,115,,-5],["s",1.5],[1065+46,105,,-10],[1075+46,100,,-30],["s",1.3],[1090+46,100,,-60],["s",1.2],[1120+33,100,,-85],["s",1.3],[1135+33,101,,-70],[1150+33,105,,-60],["s",1.6],[1170+33,105,,-30],["s",1.8],[1182+33,102,,-10],["s",1.5],[1198+33,97,,0],[1201+33,95,,0],["s",1.2],[1204+33,90],["s",1.1],[1204+33,80,,0],["s",1],[1204+33,78,,0],["s",0.8],[1204+33,75,,0],[1204+33,75,0.5,0]],

  "atat_f" : [[1204+33,75,0,0],["b","atat"],["c","object.scene='11'"],["s",1.5],[1204+33,120,,0],[1204+33,130,,-5],[1204+33,135,,0],[1204+33,148,,10],["s",1.6],[1203+33,153,,20],["s",1.8],[1200+33,156,,40],["s",2],[1196+33,157,,55],["s",2.1],[1190+20,158,,70],["s",2.3],[1175,158,,110],[1164,160,,130],[1157,165,,140],[1155,172,,150],[1155,190,,160],[1155,210,,165],["s",2.3],["c","cg.objects.clone_f.Animator.restart();clone_f_copy(object)"],[1160,260],["s",2.3],[1163,276],[1167,290,,160],[1169,297,,155],[1175,308,,150],[1181,317,,145],[1187,324,,140],["s",2],[1197,329,,135],["s",1.8],[1204,332,,125],["s",1.5],[1215,334,,115],["s",1.2],[1230,334,,105],["c","cg.sequences.atat_flashes.run()"],["s",0.8],[1238,334,,95],[1230,334,,90],["s",1.2],[1218,335,,70],["b","lifts"],["s",1.4],[1205,335,,50],[1191,336,,55],[1175,338,,60],[1160,341,,70],[1149,344,,75],[1137,346,,80],["s",1.2],[1125,348,,90],["s",1],[1117,348,,90],["s",0.5],[1115,348,,90],["s",0.3],[1113,348,,90],["s",0.1],[1114,348,,90],["c","cg.graphics.mainControl.bravoLevel=1"],["s",1],[1114,348,,90]],

  "atat_b" : [[1154+33,75,0,0],["b","atat"],["c","object.scene='11'"],["s",1.5],[1154+33,90,,0],[1150+33,97,,10],["c","cg.sequences.unauthorised.run()"],[1147+33,100,,15],[1141+33,103,,20],[1135+33,104,,30],["s",1],[1131+33,105,,40],["s",0.7],[1129+33,105,,50],["s",0.7],[1128+33,105,,55],["s",0.8],[1132+33,105,,60],["s",1.2],[1135+33,105,,70],["s",1.4],[1150+33,105,,80],["s",2],[1180+33,105,,90],["s",2.2],[1185+33,106,,100],[1190+33,108,,110],[1194+33,111,,120],[1197+33,115,,125],[1199+33,121,,130],[1200+33,125,,135],[1201+33,130,,140],[1203+33,140,,145],[1203+33,153,,150],[1200+33,156,,155],[1196+33,157,,157],[1190+20,158],[1175,158,,165],[1164,160,,172],[1157,165,,175],[1155,172,,172],[1155,190,,160],[1155,210,,165],["s",2.2],["c","cg.objects.clone_b.Animator.restart();clone_b_copy(object)"],[1160,260,,165],["s",2.2],[1163,276],[1167,290,,160],["s",2.4],[1169,297,,150],["s",2],[1175,308,,145],["b","lifts"],["s",1.5],[1177,310,,140],["s",0.7],[1178,311,,140],[1177,310,,130],["s",1.2],[1175,308,,100],["s",1.5],[1172,301,,70],["s",2],[1170,295,,40],["s",2.4],[1170,287,,20],[1172,278,,0],[1175,271,,-20],["s",2.1],[1180,265,,-30],["s",1.7],[1188,259,,-40],[1194,257,,-50],[1202,255,,-60],[1207,254,,-70],[1211,252,,-85],[1215,251,,-100],[1222,246,,-115],[1227,241,,-135],[1230,237,,-155],[1234,228,,-180],["s",1.4],[1235,219,,-180],["s",1.2],[1235,210,,-180],["s",1],[1235,205,,-180],["s",0.7],[1235,203,,-180],["s",0.2],[1235,202,,-180],["c","cg.graphics.mainControl.alphaLevel=1"],["s",1],[1235,202,8,-180]],

  "clone_atat_b" : [],
  "clone_atat_f" : [],

  "bridge_hallway_l" : [[1701,348,0,90],["c","cg.graphics.mainControl.bravoLevel=2"],["s",0.3],[1698,348,,90],["s",0.6],[1695,348,,90],["s",0.9],[1690,348,,90],["s",1.2],[1673,348,,100],["s",1.3],[1670,348,,105],["s",1.4],[1663,346,,110],["s",1.5],[1659,344,,120],["s",1.6],[1655,341,,135],["c","cg.graphics.mainControl.bravoLevel=1"],["c","cg.sequences.atat_trooper_gun.run()"],[1652,338,,150],[1649,334,,165],["c","cg.graphics.mainControl.bravoLevel=0"],["b","bridge"],[1647,330,,180],["c","object.scene='12'"],[1645,325,,195],[1645,320,,210],[1645,315,,225],[1647,310,,240],[1649,306,,255],[1652,302,,265],[1655,299],["c","cg.sequences.atat_zaps.run()"],[1659,296,,255],[1663,294,,245],[1668,292,,230],[1674,290,,215],[1679,288,,200],[1682,286,,185],[1685,283,,170],[1687,280,,155],[1689,276,,130],[1690,272,,115],[1690,268,,100],[1690,264,,90],[1689,260,,80],[1687,257,,75],[1685,253,,70],[1682,250,,65],[1673,244,,55],[1660,235,,45],[1647,226,,35],["a","b-a"],[1643,221,,30],[1642,215],[1643,209],[1646,203],["s",1.4],[1660,178,,32],["s",1],[1666,169,,37],["s",0.9],[1670,163,,40],["s",0.8],[1675,157,,50],["s",0.7],[1679,155,,70],["s",0.6],[1683,155,,85],["s",0.5],[1690,157,,100],[1695,160,,110],["s",0.3],[1698,162,,115],["s",0.1],[1700,163],["s",1],[1700,163,5]],
  "bridge_hallway_r" : [[1822,202,0,-180],["c","cg.graphics.mainControl.alphaLevel=2"],["s",1],[1822,202,1,-180],["s",0.3],[1822,199,,-180],["s",0.7],[1822,197,,-180],["s",1],[1822,195,,-180],["s",1.2],[1822,190,,-180],["s",1.4],[1822,180,,-180],["s",1.6],[1822,167,,-175],[1822,160,,-160],["c","cg.graphics.mainControl.alphaLevel=1"],[1822,150,,-130],[1822,135,,-90],["c","cg.sequences.atat_shoot.run()"],["c","cg.graphics.mainControl.alphaLevel=0"],["b","bridge"],[1822,120,,-50],["c","object.scene='12'"],["s",1.4],[1822,105,,0],[1820,97,,-10],[1815,90,,-20],[1807,81,,-40],[1790,67,,-60],[1778,57,,-65],[1764,49,,-70],["s",1.2],[1753,47,,-90],[1742,51,,-115],[1733,59,,-130],[1722,73,,-150],["s",1],[1714,85,,-160],["s",0.7],[1711,94,,-180],[1712,103,,-210],["s",0.6],[1718,110,,-225],["s",0.5],[1723,114,,-235],["s",0.3],[1726,116,,-235],["s",0.15],[1727,117,,-235],["s",1],[1727,117,5,-235]],

  "sirens_r" : [[1727,117,0,125],["b","sirens"],["s",0.2],[1726,116],["s",0.4],[1723,114,,120],["s",0.6],[1717,111,,130],["s",0.9],[1709,106,,160],["s",1.3],[1681,90,,250],["s",1.6],[1665.64,80.12,,300],["c","cg.graphics.turbovatorRightEnter.open();cg.graphics.turbovatorLeftEnter.open()"],["b","saber"],[1655.16,69.56,,340],["c","object.scene='13'"],[1646.62,58.63,,370],["s",1.1],[1638,49,,400],[1628.14,42,,430],[1616.78,38,,450],[1604.56,36,,460],["s",1],[1598,35],["s",0.5],[1595,35],["s",0.3],[1593,35],["s",1],["c","cg.graphics.turbovatorRightEnter.close();cg.graphics.turbovatorLeftEnter.close()"],[1593,35,3.5]],
  "sirens_l" : [[1700,163,0,115],["b","sirens"],["s",0.2],[1699,162],["s",0.4],[1695,160,,110],["s",0.6],[1689,156,,100],["s",0.9],[1681,151,,70],["s",1.3],[1655,135,,-20],["s",1.6],[1640.13,126.08,,-70],["b","saber"],[1626.56,123.03,,-110],["c","object.scene='13'"],[1613.33,122.84,,-140],["s",1.2],[1600,123,,-170],[1589,119,,-200],[1580,113,,-220],[1570,103,,-230],["s",1],[1566,97],["s",0.5],[1563,92],["s",0.3],[1562,90],["s",1],[1562,90,3.5]],

  "light_saber_r" : [[1593,35,0,460],["c","cg.objects.cut_roof_r.Animator.animation = cg.Animation.animations.cut_roof_r"],["s",1],[1589,36,1,410],[1586,39,1,370],[1586,39,0.4,360],[1586,39,0.4,355],[1586,39,0.5,360],[1586,39,1,380],["c","cg.graphics.turbovatorRightExit.open();cg.graphics.turbovatorLeftExit.open()"],[1586,39,0.8,390],[1586,39,0.3,395],[1582,34,1,370]],
  "light_saber_l" : [[1562,90,0,-230],["c","cg.objects.cut_roof_l.Animator.animation = cg.Animation.animations.cut_roof_l"],["s",1],[1558,87,1,-180],[1559,83,1,-140],[1559,83,0.4,-130],[1559,83,0.4,-125],[1559,83,0.5,-130],[1559,83,1,-150],[1559,83,0.8,-160],[1559,83,0.3,-155],[1552,84,1,-135]],

  "cut_roof_r" : [[1594,23],["s",0.2],[1593,21],[1590,18],[1586,18],[1584,18],[1581,20]],
  "cut_roof_l" : [[1558,99],["s",0.23],[1552,100],[1548,99],[1546,96],[1545,91]],

  "cannon_f" : [[1552,84,,-135],["b","cannon"],["c","object.scene='14'"],["s",1.5],[1543.57,76.74,,-125],["s",1.8],["c","cg.sequences.tblc_part_1.run()"],[1534.99,69.57,,-115],["s",2],[1526.12,62.82,,-110],[1518,56.84,,-100],[1504,48],["s",1.5],[1495,43],["s",1],[1486,40],["c","cg.graphics.turbovatorRightExit.close();cg.graphics.turbovatorLeftExit.close()"],["s",0.6],[1479,39],[1479,39,0.4],["s",1.2],[1466,40],["s",2],[1453,44],["s",1.8],[1436,51],["s",2.2],[1372,87],["s",1.4],[1358,95,,-100],["s",1],[1351,99,,-95],["s",0.6],["c","cg.sequences.tblc_part_2.run()"],[1350,99,,-90]],

  "cannon_f_aMode" : [[1350,99,,-90],["s",1],[1350,99,3.5],["e","linear"],["s",0.9],[1347,101],["s",1.6],[1338,106]],
  "cannon_f_bMode" : [[1350,99,,-90],["s",0.8],[1351,99],["e","inOutSine"],[1360,93],["s",1],["e","inSine"],[1350,99],["e","linear"],["s",1.2],[1347,101],["s",1.6],[1338,106]],

  "cannon_b" : [[1582,34,,10],["b","cannon"],["c","object.scene='14'"],["s",1.5],[1574.88,29.59,,-20],[1564.51,26.25,,-50],[1553.8,24.35,,-75],[1542.62,24.13,,-100],[1530,25],["s",1],[1520,26],["s",0.5],[1507,28],[1507,28],["s",1.1],[1492,31],["s",1.7],[1476,35],["s",1.9],[1458,41],["s",2],[1424,58],["s",1.4],[1407,67,,-100],["s",1],[1400,71,,-95],["s",0.6],[1399,71,,-90]],

  "cannon_b_aMode" : [[1399,71,,-90],["s",1],[1399,71,3.5],["e","linear"],["s",0.9],[1395,73],["s",1.6],[1379,82,,-90]],
  "cannon_b_bMode" : [[1399,71,,-90],["s",0.8],[1400,71],["e","inOutSine"],[1409,65],["s",1],["e","inSine"],[1399,71],["e","linear"],["s",1.2],[1395,73],["s",1.6],[1379,82,,-90]],

  "hallway_f" : [[1338,106,,-90],["b","hallway"],["s",1.8],[1331,110],["s",2],[1324,114,,-100],["s",2.1],[1319,117,,-120],["s",2.3],[1313,122,,-140],["s",2.4],[1307,129,,-160],[1304,137,,-170],[1302,149,,-180],[1302,162],[1302,173],[1303,213,,-200],[1304,223],[1306,232],[1311,241],[1320,247],["b","kylo"],[1333,250],[1351,252],["s",2.4],[1366,253],[1383,255],[1398,257],[1415,259],["s",2.1],[1432,261],["c","object.scene='15'"],[1451,263,,-195],["s",2.2],[1468,268,,-190],["s",1.4],[1478,276,,-180],["s",0.7],[1482,281,,-170]],

  "hallway_b" : [[1379,82,,-90],["b","hallway"],["s",1.8],[1369,88],["s",2],[1357,95],["s",2.1],[1337,106],["s",2.3],[1323,114,,-100],["s",2.4],[1314,120,,-120],[1309,126,,-140],[1305,132,,-160],[1303,139,,-170],[1302,147,,-180],[1302,160],[1303,195],[1303,212,,-200],[1304,223],[1306,233],[1311,241],[1320,248],[1333,251],[1349,253],[1364,256],["s",2.5],[1378,260],["b","kylo"],["c","object.scene='15'"],["s",2.2],[1394,263,,-195],["s",1.6],[1411,265,,-190],["s",1],[1428,264]],

  "kylo_a_r" : [[1428,264,,170],["a","kylo"],["s",1],[1428,264,1],["s",1.5],[1423.6,255.68,,160],["s",1.8],[1420.7,247.86,,140],[1419.34,240.57,,120],[1419.56,235,,100],["s",1.8],[1421.38,229,,80],["s",1.2],[1424.85,224,,50],["s",0.8],[1430,219,,30],["s",1],[1430,219,0.3]],
  "kylo_a_l" : [[1482,281,,190],["s",1],[1482,281,1],["s",1.6],[1486.33,270.74,,180],["s",2.1],[1489.75,261.21,,150],["s",2.4],[1491.76,251.96,,130],[1492.04,242.82,,100],["s",1.9],[1490.45,233.94,,70],["s",1.5],[1487.03,225.75,,30],["s",0.9],[1482,219,,-30],[1482,219,0.5]],

  "kylo_a_force_r" : [[1430,219,,30],["s",1],[1429,221],["s",1.5],[1424.5,228],["s",1],[1423,231],[1423,231,0.5],[1424.5,228],["s",1.5],[1429,221],["s",1],[1430,219],[1430,219,0.5],[1429,221],["s",1.5],[1424.5,228],["s",1],[1423,231],[1423,231,1],["s",1.2],[1419,236,,50],["s",1.5],[1413,240,,70],["s",1],[1404,243,,90],[1404,243,0.5],["a","escape"],[1404,243],[1408,243],["s",1.5],[1412.22,242.95,,95],["s",2],[1420.16,243.54,,100],[1427.7,244.85,,110],[1434.78,246.92,,120],[1441.32,249.77,,130],[1447.27,253.39,,140],[1452.61,257.75,,150],[1457.29,262.79,,160],[1461.32,268.43,,170],[1464.68,274.56,,178],[1467.39,281.08,,182],[1469.45,287.84,,185],["b","escape"],[1470.89,294.7,,188],[1471.73,301.48,,190],[1472,308]],
  "kylo_a_force_l" : [[1482,219,,-30],["s",1],[1483,221],["s",1.5],[1486.5,228],["s",1],[1488,231],[1488,231,0.5],[1486.5,228],["s",1.5],[1483,221],["s",1],[1482,219],[1482,219,0.5],[1483,221],["s",1.5],[1486.5,228],["s",1],[1488,231],[1488,231,1],[1488,231],["s",1.2],[1489.96,236.09,,-20],["s",1.5],[1491,241.7,,-10],["s",1.8],[1491.06,247.79,,0],[1490.16,254.36,,2],[1488.38,261.44,,5],[1485.81,269.09,,7],[1482.64,277.41,,8],[1479.09,286.55,,10],[1475,296.68],["b","escape"],[1472,308],[1472,308]],

  "kylo_b_l" : [[1428,264,,170],["a","kylo"],["s",1],[1431.74,262,,165],["s",1.4],[1435.51,259,,160],["s",1.8],[1439.34,254.82,,155],["s",2],[1443.26,251.65,,150],[1447.32,248.47,,145],[1451.55,245.3,,140],[1456,242.17,,135],[1460.7,239.1,,130],[1465.7,236.13,,125],[1471.06,233.28,,120],[1476.82,230.59,,115],[1483.04,228.08,,107],["s",1.7],[1489.77,225.79,,100],["s",1.4],[1497.07,223.75,,90],["s",1],[1505,222,,80],[1505,222,0.5],["s",0.4],[1503,227,,75],["s",1],[1503,227,0.4],["s",0.4],[1502,216,,85],["s",1],[1502,216,0.5,,90],["s",0.4],[1499,222,,100],["s",0.6],[1495,230.76,,110],["s",0.8],[1489.62,239.66,,120],["s",1.4],[1485.24,248.99,,130],["b","escape"],["a","escape"],[1481.47,259.06,,140],[1478.28,270.14,,155],[1475.65,282.25,,170],[1473.55,295.12,,180],[1472,308,,190]],
  "kylo_b_r" : [[1482,281,,190],["s",1],[1485.18,283.73,,180],["s",1.2],[1490.2,285.63,,150],["s",1.5],[1496.29,286.33,,120],[1502.69,285.56,,110],[1508.67,283.16,,105],[1513.51,279.07,,100],["s",1],[1516.52,273.3,,95],["s",0.4],[1517,266,,85],["s",1],[1517,266,0.5,80],[1517,266,0.5],["s",0.6],[1514,274],[1512,261],[1512,261,1],[1512,266],["s",0.7],[1510,275,,70],["s",0.8],[1505,281,,60],["s",1],[1496,283,,45],["s",1.3],[1487,285,,30],["s",1.5],[1481,288,,15],["s",1.7],[1477,292,,13],["b","escape"],[1474,297,,11],["s",1.8],[1472,308,,10]],

  "pod_transition_f" : [[1472,308,,10]],
  "pod_transition_b" : [[1472,308,,190]],

  "pod_enter_lf" : [[1472,308,,10],["c","object.scene='16'"],["s",1.8],[1467.37,323.43,,20],[1462.23,344.19,,60],["s",2.3],[1458.86,368.11,,110],[1457.82,393.27,,160],["s",2],[1458,410,,200],["s",1.7],[1457.5,424.56,,240],["s",1.3],[1456,429.25,,250],["s",1],[1453.5,432.06,,260],["s",0.8],[1450,433,,270],["s",1],[1450,433,0.8],["c","resistance.podDoors.uC.isOpen=true;resistance.podDoors.uD.isOpen=true"],[1450,433,0.7]],
  "pod_enter_lb" : [[1472,308,,190],["c","object.scene='16'"],["s",1.8],[1467.15,326,,210],[1460.58,337.76,,230],[1453.42,344.72,,245],["s",1],[1446.85,349,,250],[1442,351,,260]],
  "pod_enter_rf" : [[1472,308,,10],["c","object.scene='16'"],["s",1.8],[1467.37,323.43,,20],[1462.23,344.19,,60],["s",2.3],[1458.86,368.11,,110],[1457.82,393.27,,150],["s",2],[1458,410,,155],["s",1.7],[1458.5,424.56,,150],["s",1.3],[1460,429.25,,130],["s",1],[1462.5,432.06,,110],["s",0.8],[1466,433,,90],["s",1],[1466,433,0.8],["c","resistance.podDoors.uE.isOpen=true;resistance.podDoors.uF.isOpen=true"],[1466,433,0.7]],
  "pod_enter_rb" : [[1472,308,,190],["c","object.scene='16'"],["s",1.8],[1468.28,323.12,,170],[1466.72,334.88,,150],[1467.32,343.28,,130],["s",1.2],[1469,348,,110],["s",0.8],[1473,351,,100]],

  "pod_door_lf" : [[1450,433,,-90]],
  "pod_door_lb" : [[1442,351,,-100]],
  "pod_door_rf" : [[1466,433,,90]],
  "pod_door_rb" : [[1473,351,,100]],

  "pod_load_lf" : [[1450,433,,-90],["s",0.8],[1445,433],["s",1.5],["b",null],[1410,433],["c","resistance.runEscapePodAnimation(true)"]],
  "pod_load_lb" : [[1442,351,,-100],["s",0.8],[1437,352],["s",1.5],["b",null],[1397,357],[1397,357]],
  "pod_load_rf" : [[1466,433,,90],["s",0.8],[1471,433],["s",1.5],["b",null],[1511,433],["c","resistance.runEscapePodAnimation(false)"]],
  "pod_load_rb" : [[1473,351,,100],["s",0.8],[1478,352],["s",1.5],["b",null],[1516,358],[1516,358]],

  "pod_exit_lb" : [[812,359,,-100],["c","object.scene='17'"],["s",1],["c","resistance.podDoors.dC.isOpen=true;"],[845,354,,-80],["a","exit_escape_pod"],["c","resistance.setLeftEPUp()"],["s",1.1],[854.26,354.1,,-70],["s",1.2],[860.89,354.84,,-60],["s",1.3],[865.34,356.83,,-50],["s",1.5],[868.03,360.72,,-30],[869.42,367.12,,-15],["c","resistance.podDoors.dC.isOpen=false;resistance.podDoors.dD.isOpen=false"],[869.93,376.67,,0],[870,390,,5],["s",1.4],[870,420,,50],["s",1.3],[870,440,,110],["s",1.2],[870,460,,170],["s",1],[870,465,,180]],
  "pod_exit_lf" : [[812,432,,270],["c","object.scene='17'"],["s",1],["c","resistance.podDoors.dD.isOpen=true"],[850,432,,250],["s",0.8],[855.31,432.37,,240],[859.8,433.47,,230],[863.47,435.31,,220],[866.33,437.88,,210],[868.37,441.18,,200],["s",1],[869.59,445.22,,190],[870,450,,185],[870,460,,180],[870,490,,190],[869.06,495,,210],[866.25,500,,240],[861.56,505,,260],[855,510,,270]],
  "pod_exit_rb" : [[930,359,,100],["c","object.scene='17'"],["s",1],["c","resistance.podDoors.dE.isOpen=true"],[895,354,,80],["a","exit_escape_pod"],["c","resistance.setRightEPUp()"],[885.74,354.1,,70],["s",1.2],[879.11,354.84,,60],["s",1.4],[874.66,356.83,,50],["s",1.6],[871.97,360.72,,30],["s",1.9],[870.58,367.12,,15],["s",2],["c","resistance.podDoors.dE.isOpen=false;resistance.podDoors.dF.isOpen=false"],[870.07,376.67,,0],[870,390,,-5],[870,420,,-50],["s",1.2],[870,440,,-110],["s",1.1],[870,460,,-170],["s",1],[870,465,,-180]],
  "pod_exit_rf" : [[930,432,,90],["c","object.scene='17'"],["s",1],["c","resistance.podDoors.dF.isOpen=true"],[890,432,,100],[884.69,432.57,,120],[880.2,434.29,,140],[876.53,437.14,,150],[873.67,441.14,,160],[870.5,446.29,,170],[870,450,,175],[870,460,,180,,180],[870,490,,190],[869.06,495,,210],[866.25,500,,240],[861.56,505,,260],[855,510,,270]],

  "start_from_crashsite_wait_b" : [[870,470,,180],["s",0.5],[870,475]],
  "stop_at_crashsite_wait_b" : [[870,465,,180],["s",0.5],[870,470]],
  "bypass_crashsite_wait_b" : [[870,465,,180],["s",1],[870,475]],
  "start_from_crashsite_wait_f" : [[850,510,,-90],["s",0.4],[845,510]],
  "stop_at_crashsite_wait_f" : [[855,510,,-90],["s",0.5],[850,510]],
  "bypass_crashsite_wait_f" : [[855,510,,-90],["s",1],[845,510,,-90]],

  "start_from_unload_wait_b" : [[820,510,,-90],["s",0.5],[815,510]],
  "stop_at_unload_wait_b" : [[825,510,,-90],["s",0.8],[820,510]],
  "bypass_unload_wait_b" : [[825,510,,-90],["s",1],[815,510,,-90]],
  "start_from_unload_wait_f" : [[780,510,,-90],["a","lieutenant_bek"],["s",0.5],[775,510]],
  "stop_at_unload_wait_f" : [[785,510,,-90],["s",0.8],[780,510]],
  "bypass_unload_wait_f" : [[785,510,,-90],["a","lieutenant_bek"],["s",1.4],[775,510,,-90]],

  "crashsite-unload_wait_f" : [[845,510,,-90],["s",1],[845,510],[785,510]],
  "crashsite-unload_wait_b" : [[870,475,,-180],["s",1],[870,490,,-170],["s",1.3],[867,500,,-150],["s",1.4],[863,505,,-130],[855,508,,-110],["s",1.2],[845,510,,-100],["s",1.1],[825,510,,-90]],

  "to_unload_0" : [[815,510,,-90],["c","object.scene='18'"],["s",1],[800,510,,-90],[750,510,,-90],["s",1.3],[741,510.8],[734,513.2],[729,517.2],["s",1.4],[726,522.8],["s",1.5],[725,530],["s",1.6],[725,540],["s",1.7],[726,549],[729,556],[734,561],["s",1.6],[741,564],[745.31,565],[748.25,568],[749.81,573],["s",1.3],[750,580],["s",1],[750,605],["s",0.8],[750,612]],
  "to_unload_1" : [[775,510,,-90],["c","object.scene='18'"],["s",1.2],[750,510,,-90],["s",1.2],[741,510.8],["s",1.3],[734,513.2],["s",1.4],[729,517.2],["s",1.5],[726,522.8],["s",1.3],[725,530],[725,540],[726,549],[729,556],[734,561],[741,564],[750,565],[780,565],[785.56,566.67],[788.89,571.67],["s",1.2],[790,580],["s",1],[790,605],["s",0.8],[790,612]],
  "to_unload_2" : [[815,510,,-90],["c","object.scene='18'"],["s",1],[800,510,,-90],["s",1.3],[750,510,,-90],[741,510.8],[734,513.2],["s",1.4],[729,517.2],["s",1.5],[726,522.8],[725,530],[725,540],[726,549],[729,556],["s",1.6],[734,561],[741,564],[750,565],[820,565],[825.56,566.67],[828.89,571.67],["s",1.3],[830,580],["s",1],[830,605],["s",0.8],[830,612]],
  "to_unload_3" : [[775,510,,-90],["c","object.scene='18'"],["s",1.2],[750,510,,-90],["s",1.2],[741,510.8],["s",1.3],[734,513.2],["s",1.4],[729,517.2],["s",1.55],[726,522.8],[725,530],[725,540],[726,549],[729,556],[734,561],[741,564],[750,565],[860,565],[865.56,566.67],[868.89,571.67],["s",1.2],[870,580],["s",1],[870,605],["s",0.8],[870,612]],

  "outside_0" : [[161,810],["s",0.6],[166,786],[175,776],[192,765],[218,753],[255,749],[284,759],[311,774],[349,779],[382,784],[419,791],[454,781],[462,780],[480,785],[496,810]],
  "outside_1" : [[376,810],["s",0.6],[378,784],[376,764],[365,735],[370,722],[391,711],[422,696],[439,696],[470,697],[504,706],[533,726],[544,753],[533,774],[523,810]],
  "outside_2" : [[305,810],["s",0.6],[303,782],[297,770],[281,750],[249,739],[214,741],[198,753],[184,772],[173,810]],
  "outside_3" : [[188,810],["s",0.6],[192,774],[206,752],[238,742],[273,752],[317,774],[348,774],[384,779],[397,810]],
  "outside_4" : [[544,810],["s",0.6],[544,785],[557,774],[557,758],[547,749],[538,752],[536,761],[528,773],[522,783],[518,792],[505,795],[487,792],[456,780],[428,785],[412,792],[401,810]],
  "outside_5" : [[316,810],["s",0.6],[329,780],[348,761],[350,739],[343,712],[323,705],[287,715],[271,736],[270,762],[281,786],[313,791],[346,784],[366,773],[399,778],[423,788],[455,789],[471,781],[481,781],[490,790],[510,810]],
  "outside_6" : [[157,810],["s",0.6],[164,782],[168,769],[170,750],[179,738],[192,739],[182,745],[185,738],[195,729],[215,718],[247,717],[282,714],[305,707],[334,707],[353,719],[356,744],[336,768],[294,777],[267,792],[255,810]],
  "outside_7" : [[455,810],["s",0.6],[452,783],[442,776],[424,779],[403,775],[376,767],[374,744],[361,726],[344,712],[309,706],[277,730],[273,751],[275,775],[284,791],[292,810]],

  "unauthorised_blast_0" : [[1202,47,,60],[1202,47,,60],[1156,72,0.2]],
  "unauthorised_blast_1" : [[1202,47,,50],[1202,47,,50],[1163,79,0.2]],
  "unauthorised_blast_2" : [[1222,49,,-60],[1222,49,,-60],[1267,73,0.2]],
  "unauthorised_blast_3" : [[1222,49,,-50],[1222,49,,-50],[1267,80,0.2]],

  "atat_shot_0" : [[1803,183],[1803,47,0.3]],
  "atat_shot_1" : [[1815,183],[1815,47,0.3]],
  "atat_shot_2" : [[1828,183],[1828,47,0.3]],
  "atat_shot_3" : [[1840,183],[1840,47,0.3]],

  "atat_trooper_gun_0" : [[1682,353,,90],[1577,353,0.26,90]],
  "atat_trooper_gun_1" : [[1682,339,,90],[1577,339,0.26,90]],
  "atat_trooper_gun_2" : [[1682,324,,90],[1577,324,0.26,90]],
  "atat_trooper_gun_3" : [[1682,307,,90],[1577,307,0.26,90]]
}

for (let anipart = 0; anipart < rawAnimations["pod_ddC"].length; anipart++) {
  let newpart = Array.from(rawAnimations["pod_ddC"][anipart]);
  newpart[0] += 587;
  rawAnimations["pod_udC"].push(newpart);
}
for (let anipart = 0; anipart < rawAnimations["pod_ddD"].length; anipart++) {
  let newpart = Array.from(rawAnimations["pod_ddD"][anipart]);
  newpart[0] += 587;
  rawAnimations["pod_udD"].push(newpart);
}
for (let anipart = 0; anipart < rawAnimations["pod_ddE"].length; anipart++) {
  let newpart = Array.from(rawAnimations["pod_ddE"][anipart]);
  newpart[0] += 587;
  rawAnimations["pod_udE"].push(newpart);
}
for (let anipart = 0; anipart < rawAnimations["pod_ddF"].length; anipart++) {
  let newpart = Array.from(rawAnimations["pod_ddF"][anipart]);
  newpart[0] += 587;
  rawAnimations["pod_udF"].push(newpart);
}

(() => {
  let cloneactive = false;
  for (let anipart = 0; anipart < rawAnimations["atat_f"].length; anipart++) {
    let newpart = Array.from(rawAnimations["atat_f"][anipart]);
    if (typeof(newpart[0])=="number") {
      newpart[0] += 587;
      if (newpart[1]>190) { cloneactive = true; }
      if (cloneactive) {
        rawAnimations["clone_atat_f"].push(newpart);
      }
    } else if (cloneactive&&newpart[0]=="s") {
      rawAnimations["clone_atat_f"].push(newpart);
    }
  }

  cloneactive = false;
  for (let anipart = 0; anipart < rawAnimations["atat_b"].length; anipart++) {
    let newpart = Array.from(rawAnimations["atat_b"][anipart]);
    if (typeof(newpart[0])=="number") {
      newpart[0] += 587;
      if (newpart[1]>190) { cloneactive = true; }
      if (cloneactive) {
        rawAnimations["clone_atat_b"].push(newpart);
      }
    } else if (cloneactive&&newpart[0]=="s") {
      rawAnimations["clone_atat_b"].push(newpart);
    }
  }

  rawAnimations.clone_atat_f[rawAnimations.clone_atat_f.length-1][2] = 6;
  rawAnimations.clone_atat_b[rawAnimations.clone_atat_b.length-1][2] = 8.5;
})();

function clone_f_copy(toCopy) {
  cg.objects.clone_f.Graphic.graphic.seatOccupancy = toCopy.Graphic.graphic.seatOccupancy;
  cg.objects.clone_f.Graphic.graphic.colour = toCopy.Graphic.graphic.colour;
}

function clone_b_copy(toCopy) {
  cg.objects.clone_b.Graphic.graphic.seatOccupancy = toCopy.Graphic.graphic.seatOccupancy;
  cg.objects.clone_b.Graphic.graphic.colour = toCopy.Graphic.graphic.colour;
}

for (let i=0;i<3;i++) {
  const basePositons = [
    [1442.25,89.24,,330],
    [1395,117.14,,330],
    [1346.24,145.55,,330]
  ]
  const base = basePositons[i];
  const rad = (base[3]-90) * (Math.PI/180);
  const fullExtendX = base[0] + 25 * Math.cos(rad);
  const fullExtendY = base[1] + 25 * Math.sin(rad);
  const partialExtendX = base[0] + 22 * Math.cos(rad);
  const partialExtendY = base[1] + 22 * Math.sin(rad);
  const data = [
    [base[0],base[1],0,base[3]],
    [fullExtendX,fullExtendY,1.1,base[3]],
    [partialExtendX,partialExtendY,0.3,base[3]],
    [base[0],base[1],1.1,base[3]]
  ];
  rawAnimations["tblc_"+i] = data;
}

cg.Animation.createAnimation({},"tblc_blast")
.loadRaw([[0,0],[1,0],[1,0.5],[0,0],[0,1],[0,0]],[
  {keySet:["transform","o"]},
  {keySet:"time"}
]);

const tblcCallbacks = {
  "0" : () => {
    if (rotr.effects.cannons==='a'){
      cg.objects.tblc_0.Animator.animation = cg.Animation.animations.tblc_0;
      cg.objects.tblc_0.Animator.restart();
    }
    cg.createEvent({
      duration : 1100,
      end : () => {
        cg.objects.tblc_0.blast.Animator.animation = cg.Animation.animations.tblc_blast;
        cg.objects.tblc_0.blast.Animator.restart();
      }
    })
  },
  "1" : () => {
    if (rotr.effects.cannons==='a'){
      cg.objects.tblc_1.Animator.animation = cg.Animation.animations.tblc_1;
      cg.objects.tblc_1.Animator.restart();
    }
    cg.createEvent({
      duration : 1100,
      end : () => {
        cg.objects.tblc_1.blast.Animator.animation = cg.Animation.animations.tblc_blast;
        cg.objects.tblc_1.blast.Animator.restart();
      }
    })
  },
  "2" : () => {
    if (rotr.effects.cannons==='a'){
      cg.objects.tblc_2.Animator.animation = cg.Animation.animations.tblc_2;
      cg.objects.tblc_2.Animator.restart();
    }
    cg.createEvent({
      duration : 1100,
      end : () => {
        cg.objects.tblc_2.blast.Animator.animation = cg.Animation.animations.tblc_blast;
        cg.objects.tblc_2.blast.Animator.restart();
      }
    })
  }
};

cg.createSequence({
  callbacks : tblcCallbacks,
  data : [1000,"2",200,"1",2000,"0",600,"1",2200,"2",4000,"2"]
},"tblc_part_1");

cg.createSequence({
  callbacks : tblcCallbacks,
  data : [400,"1","2"]
},"tblc_part_2");

for (let key in rawAnimations) {
  const data = rawAnimations[key];
  cg.createPath(data,key)
  const newAnimation = cg.Animation.createAnimation({},key);
  newAnimation.loadRaw(data,[
    {keySet:["transform","x"]},
    {keySet:["transform","y"]},
    {keySet:"time"},
    {keySet:["transform","r"]}
  ],["consistentSpeed","persistentValues","setEmptyToZero"]);
}

cg.BlockController.createBlock({},"probe");
cg.BlockController.createBlock({},"atat");
cg.BlockController.createBlock({},"lifts");
cg.BlockController.createBlock({},"bridge");
cg.BlockController.createBlock({},"sirens");
cg.BlockController.createBlock({},"saber");
cg.BlockController.createBlock({},"cannon");
cg.BlockController.createBlock({},"hallway");
cg.BlockController.createBlock({},"kylo");
cg.BlockController.createBlock({},"escape");

cg.settings.blockcontroller.debug.animations.push(cg.Animation.animations.probe_f);
cg.settings.blockcontroller.debug.animations.push(cg.Animation.animations.atat_b);
cg.settings.blockcontroller.debug.animations.push(cg.Animation.animations.bridge_hallway_r);
cg.settings.blockcontroller.debug.animations.push(cg.Animation.animations.sirens_r);
cg.settings.blockcontroller.debug.animations.push(cg.Animation.animations.light_saber_r);
cg.settings.blockcontroller.debug.animations.push(cg.Animation.animations.cannon_b);
cg.settings.blockcontroller.debug.animations.push(cg.Animation.animations.hallway_b);
cg.settings.blockcontroller.debug.animations.push(cg.Animation.animations.kylo_a_r);
cg.settings.blockcontroller.debug.animations.push(cg.Animation.animations.kylo_a_force_r);
cg.settings.blockcontroller.debug.animations.push(cg.Animation.animations.pod_enter_lb)
cg.settings.blockcontroller.debug.animations.push(cg.Animation.animations.pod_load_lb);

// cg.settings.blockcontroller.debug.animations.push(cg.Animation.animations.probe_b);
// cg.settings.blockcontroller.debug.animations.push(cg.Animation.animations.atat_f);
// cg.settings.blockcontroller.debug.animations.push(cg.Animation.animations.bridge_hallway_l);
// cg.settings.blockcontroller.debug.animations.push(cg.Animation.animations.sirens_l);
// cg.settings.blockcontroller.debug.animations.push(cg.Animation.animations.light_saber_l);
// cg.settings.blockcontroller.debug.animations.push(cg.Animation.animations.cannon_f);
// cg.settings.blockcontroller.debug.animations.push(cg.Animation.animations.hallway_f);
// cg.settings.blockcontroller.debug.animations.push(cg.Animation.animations.kylo_a_l);
// cg.settings.blockcontroller.debug.animations.push(cg.Animation.animations.kylo_a_force_l);
// cg.settings.blockcontroller.debug.animations.push(cg.Animation.animations.pod_enter_lf);

cg.Animation.createAnimation({},"alarm_lights")
.loadRaw([[1653,105,,0],[1653,105,0.1,1],[1653,105,0.5,1],[1653,105,0.7,0],[1653,105,1,0]],[
  {keySet:["transform","x"]},
  {keySet:["transform","y"]},
  {keySet:"time"},
  {keySet:["transform","o"]}
],["consistentSpeed","persistentValues","setEmptyToZero"]);

cg.createObject({},"alarm_lights")
.attach("Graphic",{
  graphic : cg.graphics.alarm_lights,
  collection : "midground"
})
.attach("Animator",{
  animation : cg.Animation.animations.alarm_lights
});

cg.scenes.main.addObject(cg.objects.alarm_lights);

cg.createGraphic({
  type : "arc",
  radius : 1.9,
  colour : "#cfcfcf"
},"guest");

for (let i=0;i<7;i++) {
  cg.createObject({},"outside_"+i)
  .attach("Graphic",{
    graphic : cg.graphics.guest,
    collection : "foreground"
  })
  .attach("Animator",{
    animation : cg.Animation.animations["outside_"+i]
  });

  cg.scenes.main.addObject(cg.objects["outside_"+i]);
}

cg.createGraphic({
  type : "rectangle",
  width : 1.5,
  height : 6,
  colour : "#f93928"
},"shot")

for (let i=0;i<4;i++) {
  cg.createObject({},"unauthorised_blast_"+i)
  .attach("Graphic",{
    graphic : cg.graphics.shot,
    collection : "midground"
  })
  .attach("Animator",{
    animation : cg.Animation.animations["unauthorised_blast_"+i],
    loop : false,
    paused : true,
    onEnd : (Animator) => {
      Animator.object.transform.y = -50;
    }
  });

  cg.scenes.main.addObject(cg.objects["unauthorised_blast_"+i]);
}

cg.createSequence({
  callbacks : {
    "0" : () => { cg.objects.unauthorised_blast_0.Animator.restart(); },
    "1" : () => { cg.objects.unauthorised_blast_1.Animator.restart(); },
    "2" : () => { cg.objects.unauthorised_blast_2.Animator.restart(); },
    "3" : () => { cg.objects.unauthorised_blast_3.Animator.restart(); },
  },
  data : ["0",400,"1",400,"3",400,"2",400,"1",1400,"0",1200,"0",300,"3",300,"2",300,"1",300,"2",1400,"0"]
},"unauthorised");

cg.createObject({
  transformInit : {x:1705,y:290,o:0}
},"destroyer_zap")
.attach("Graphic",{
  collection : "midground",
  graphic : cg.graphics.destroyer_zap
});

cg.scenes.main.addObject(cg.objects.destroyer_zap);

const destroyerZapCallbacks = {};
for (const time of [100,150,180,200,250,300]) {
  destroyerZapCallbacks[time.toString()] = () => {
    cg.objects.destroyer_zap.transform.o = 1;
    cg.createEvent({
      duration : time,
      end : () => {
        cg.objects.destroyer_zap.transform.o = 0;
      }
    })
  }
}

cg.createSequence({
  callbacks : destroyerZapCallbacks,
  data : ["200",400,"250",400,"200",400,"100",200,"150",200,"100",200,"200",400,"200",200,"100",200,"150",200,"250",400,"200",400,"100",200,"150",200,"180",200,"300"]
},"atat_zaps");

cg.createObject({
  transformInit : {x:1181,y:281,o:0}
},"atat_flashes_0_lower")
.attach("Graphic",{
  collection : "midground",
  graphic : cg.graphics.atat_flashes
});

cg.createObject({
  transformInit : {x:1181+587,y:281,o:0}
},"atat_flashes_0_upper")
.attach("Graphic",{
  collection : "midground",
  graphic : cg.graphics.atat_flashes
});

cg.createObject({
  transformInit : {x:1203,y:374,o:0}
},"atat_flashes_1_lower")
.attach("Graphic",{
  collection : "midground",
  graphic : cg.graphics.atat_flashes
});

cg.createObject({
  transformInit : {x:1203+587,y:374,o:0}
},"atat_flashes_1_upper")
.attach("Graphic",{
  collection : "midground",
  graphic : cg.graphics.atat_flashes
});

cg.scenes.main.addObject(cg.objects.atat_flashes_0_lower);
cg.scenes.main.addObject(cg.objects.atat_flashes_0_upper);
cg.scenes.main.addObject(cg.objects.atat_flashes_1_lower);
cg.scenes.main.addObject(cg.objects.atat_flashes_1_upper);

const atatFlashesCallbacks = {};
for (const flashNumber of [0,1]) {
  for (const time of [100,150,200,250,300]) {
    atatFlashesCallbacks[flashNumber + "_" + time.toString()] = () => {
      cg.objects[`atat_flashes_${flashNumber}_lower`].transform.o = 1;
      cg.createEvent({
        duration : time,
        end : () => {
          cg.objects[`atat_flashes_${flashNumber}_lower`].transform.o = 0;
        }
      })
      cg.objects[`atat_flashes_${flashNumber}_upper`].transform.o = 1;
      cg.createEvent({
        duration : time,
        end : () => {
          cg.objects[`atat_flashes_${flashNumber}_upper`].transform.o = 0;
        }
      })
    }
  }
}

cg.createSequence({
  callbacks : atatFlashesCallbacks,
  data : ["0_300",200,"1_300",200,"0_200",200,"1_300",200,"0_250",200,"0_100",100,"1_100",100,"0_150",100,"1_100",100,"0_300",200,"1_300",200,"0_200",200,"1_300",200,"0_250",200,"0_100",100,"1_100",100,"0_150",100,"1_100",100,"0_300",200,"1_300",200,"0_200",200,"1_300",200,"0_250",200,"0_100",100,"1_100",100,"0_150",100,"1_100",100,"0_300",200,"1_300",200,"0_200",200,"1_300",200,"0_250",200,"0_100",100,"1_100",100,"0_100",100,"1_150",100,"0_300",200,"1_300",200,"0_200",200,"1_300",200,"0_250",200,"0_100",100,"1_100",100,"0_150",100,"1_100",100,"0_300",200,"1_300",200,"0_200",200,"1_300",200,"0_250",200,"0_100",100,"1_100",100,"0_150",100,"1_100",100,"0_300",200,"1_300",200,"0_200",200,"1_300",200,"0_250",200,"0_100",100,"1_100",100,"0_150",100,"1_100",100,"0_300",200,"1_300",200,"0_200",200,"1_300",200,"0_250",200,"0_100",100,"1_100",100,"0_150",100,"1_100","0_300",200,"1_300",200,"0_200",200,"1_300",200,"0_250",200,"0_100",100,"1_100",100,"0_150"]
},"atat_flashes");

for (let i=0;i<4;i++) {
  cg.createObject({
    transformInit : {
      x : cg.Animation.animations["atat_shot_"+i].data[0][0],
      y : -50
    }
  },"atat_shot_"+i)
  .attach("Graphic",{
    graphic : cg.graphics.shot,
    collection : "midground"
  })
  .attach("Animator",{
    animation : cg.Animation.animations["atat_shot_"+i],
    loop : false,
    paused : true,
    onEnd : (Animator) => {
      Animator.object.transform.y = -50;
    }
  });

  cg.scenes.main.addObject(cg.objects["atat_shot_"+i]);
}

cg.createSequence({
  callbacks : {
    "0" : () => { cg.objects.atat_shot_0.Animator.restart(); },
    "1" : () => { cg.objects.atat_shot_1.Animator.restart(); },
    "2" : () => { cg.objects.atat_shot_2.Animator.restart(); },
    "3" : () => { cg.objects.atat_shot_3.Animator.restart(); },
  },
  data : ["0",200,"3",300,"2",300,"1",400,"0",200,"1",300,"2",400,"3",300,"0"]
},"atat_shoot");


for (let i=0;i<4;i++) {
  cg.createObject({
    transformInit : {
      x : cg.Animation.animations["atat_trooper_gun_"+i].data[0][0],
      y : -50
    }
  },"atat_trooper_gun_"+i)
  .attach("Graphic",{
    graphic : cg.graphics.shot,
    collection : "midground"
  })
  .attach("Animator",{
    animation : cg.Animation.animations["atat_trooper_gun_"+i],
    loop : false,
    paused : true,
    onEnd : (Animator) => {
      Animator.object.transform.y = -50;
    }
  });

  cg.scenes.main.addObject(cg.objects["atat_trooper_gun_"+i]);
}

cg.createSequence({
  callbacks : {
    "0" : () => { cg.objects.atat_trooper_gun_0.Animator.restart(); },
    "1" : () => { cg.objects.atat_trooper_gun_1.Animator.restart(); },
    "2" : () => { cg.objects.atat_trooper_gun_2.Animator.restart(); },
    "3" : () => { cg.objects.atat_trooper_gun_3.Animator.restart(); },
  },
  data : ["0",200,"3",300,"2",500,"1",200,"0",300,"1",200,"3",200,"2",200,"0",500,"1",500,"2",400,"3"]
},"atat_trooper_gun");

const rotra = new class RotrAudio {
  files = {
    outside : "ambience.mp3",
    preshows : "preshows.mp3",
    hanger : "hanger.mp3",
    prisonersAreSecure : "pas.mp3",
    interrogation : "interrogation.mp3",
    cellLoop : "cell_loop.mp3",
    wallCut : "wall_cut.mp3",
    loadLoop : "load_loop.mp3",
    dispatch : "dispatch.mp3",
    discoAtat : "load-atat.mp3",
    bridgeAbandon : "bridge-abandon.mp3",
    kyloA : "kyloa.mp3",
    kyloB : "kylob.mp3",
    escape : "escape.mp3",
    exitEscapePod : "eep.mp3",
    bek : "bek.mp3"
  };

  soundtrack = [
    "preshows",
    "closeInterrogationMainDoor",
    "interrogate",
    "openInterrogationCutDoor",
    "load",
    "d-a",
    "b-a",
    "kylo",
    "escape",
    "exit_escape_pod",
    "lieutenant_bek",
  ];

  selectedLoad = null;

  outside = null;
  hanger = null;
  cell = null;
  loading = null;

  interrogation = null;
  dispatch = null;
  escape = null;
  exitEscapePod = null;

  oneshots = [];

  track = 0;
  nextTrackTime = 0;

  get nextTrack() {
    if (this.nextTrackTime>cg.clock) {
      return null;
    } else {
      return this.soundtrack[this.track];
    }
  }

  trigger(name,meta=null) {
    if (ChoreoGraph.Audio.mode!==ChoreoGraph.Audio.WEBAUDIO) { return "Not using WebAudio"; }
    if (rotra.nextTrack!==name) { return }

    if (name==="preshows") {
      const event = meta==="north"?cg.graphics.its.eventsById.rrNShow:cg.graphics.its.eventsById.rrSShow;

      const startTime = event.startTime < cg.clock ? event.nextStartTime : event.startTime
      const timeTillStart = (startTime - cg.clock) / 1000;
      const audioPreamble = 34;
      const preshowsStartTimeWA = ChoreoGraph.Audio.ctx.currentTime + timeTillStart - audioPreamble;

      cg.createEvent({
        duration : (timeTillStart - audioPreamble) * 1000 - 7000,
        end : () => {
          rotra.outside.fadeVolume(0,7);
        }
      });

      if (preshowsStartTimeWA-ChoreoGraph.Audio.ctx.currentTime>0) {
        cg.createEvent({
          duration : (timeTillStart - audioPreamble) * 1000,
          end : () => {
            rotra.oneshots.push(cg.Audio.sounds.preshows.play({
              fadeIn : 3
            }));
          }
        });
      } else {
        rotra.oneshots.push(cg.Audio.sounds.preshows.play({
          startTime : preshowsStartTimeWA,
          fadeIn : 3
        }));
      }

      cg.createEvent({
        duration : timeTillStart * 1000 + 5 * 60000 - 9000,
        end : () => {
          rotra.hanger.fadeVolume(1,7);
        }
      });

      rotra.nextTrackTime = cg.clock + timeTillStart * 1000 + 8 * 60000;
      rotra.track++;
    } else if (name==="closeInterrogationMainDoor") {
      rotra.selectedLoad = meta;

      rotra.hanger.fadeVolume(0,7);
      rotra.cell.fadeVolume(1,3);

      this.oneshots.push(cg.Audio.sounds.prisonersAreSecure.play({
        startTime : ChoreoGraph.Audio.ctx.currentTime + 2.5,
        volume : 0.2
      }));
      rotra.track++;
    } else if (name==="interrogate"&&rotra.selectedLoad===meta) {
      rotra.cell.fadeVolume(0,3);
      rotra.interrogation = cg.Audio.sounds.interrogation.play({
        volume : 0.6
      });
      this.oneshots.push(rotra.interrogation);
      rotra.track++;
    } else if (name==="openInterrogationCutDoor"&&rotra.selectedLoad===meta) {
      if (rotra.interrogation!=null&&rotra.interrogation.stopped===false) {
        rotra.interrogation.stop(3);
      }
      this.oneshots.push(cg.Audio.sounds.wallCut.play({
        volume : 0.6
      }));
      cg.createEvent({
        duration : 40000,
        end : () => {
          rotra.loading.fadeVolume(1,10);
        }
      });
      rotra.track++;
    } else if (name==="load") {
      const timeTillDispatch =(disco.nextDispatchTime - cg.clock)/1000+1;
      if (disco.dispatchQueue[0]===rotra.selectedLoad && timeTillDispatch<15) {
        rotra.loading.fadeVolume(0,5);
        rotra.dispatch = cg.Audio.sounds.dispatch.play({
          volume : 1,
          fadeIn : 3
        });
        rotra.track++;
      }
      this.oneshots.push(rotra.dispatch);
    } else if (name==="d-a") {
      cg.createEvent({
        duration : 3000,
        end : () => {
          if (rotra.dispatch!=null&&rotra.dispatch.stopped===false) {
            rotra.dispatch.stop(2);
          }
        }
      });
      this.oneshots.push(cg.Audio.sounds.discoAtat.play({
        volume : 1,
        fadeIn : 1
      }));
      rotra.track++;
      rotra.nextTrackTime = cg.clock + 80000;
    } else if (name==="b-a") {
      this.oneshots.push(cg.Audio.sounds.bridgeAbandon.play({
        volume : 1,
        fadeIn : 1
      }));
      rotra.track++;
      rotra.nextTrackTime = cg.clock + 70000;
    } else if (name==="kylo") {
      if (rotr.effects.kylo==='a') {
        this.oneshots.push(cg.Audio.sounds.kyloA.play({
          volume : 1,
          fadeIn : 0
        }));
      } else {
        this.oneshots.push(cg.Audio.sounds.kyloB.play({
          volume : 1,
          fadeIn : 0
        }));
      }
      rotra.track++;
    } else if (name==="escape") {
      rotra.escape = cg.Audio.sounds.escape.play({
        volume : 1,
        fadeIn : 1
      });
      this.oneshots.push(rotra.escape);
      rotra.track++;
      rotra.nextTrackTime = cg.clock + 45000;
    } else if (name==="exit_escape_pod") {
      if (rotra.escape!=null&&rotra.escape.stopped===false) {
        rotra.escape.stop(1);
      }
      rotra.exitEscapePod = cg.Audio.sounds.exitEscapePod.play({
        volume : 1,
        fadeIn : 1
      });
      this.oneshots.push(rotra.exitEscapePod);
      rotra.track++;
      rotra.nextTrackTime = cg.clock + 10000;
    } else if (name==="lieutenant_bek") {
      if (rotra.exitEscapePod!=null&&rotra.exitEscapePod.stopped===false) {
        rotra.exitEscapePod.stop(1);
      }
      this.oneshots.push(cg.Audio.sounds.bek.play({
        volume : 1,
        fadeIn : 1
      }));
      cg.createEvent({
        duration : 8000,
        end : () => {
          rotra.outside.fadeVolume(1,7);
        }
      });
      rotra.track = 0;
      rotra.nextTrackTime = cg.clock + 20000;
    }
  }

  cullOneshots() {
    this.oneshots = this.oneshots.filter(oneshot => {
      if (oneshot!=null&&oneshot.stopped===false) {
        return true;
      } else {
        return false;
      }
    });
  }

  hasStartedHangerOnPause = false;

  pause() {
    if (ChoreoGraph.Audio.mode!==ChoreoGraph.Audio.WEBAUDIO) { return "Not using WebAudio"; }
    this.cullOneshots();
    const fadeOutTime = ChoreoGraph.Audio.ctx.currentTime + 0.4;
    for (const oneshot of this.oneshots) {
      oneshot.source.playbackRate.cancelScheduledValues(ChoreoGraph.Audio.ctx.currentTime);
      oneshot.source.playbackRate.setValueAtTime(oneshot.source.playbackRate.value, ChoreoGraph.Audio.ctx.currentTime);
      oneshot.source.playbackRate.linearRampToValueAtTime(0.000001, fadeOutTime);
    }

    if (this.track!==0&&!(this.track===1&&rotra.hanger.source.gainNode.gain.value>0)&&rotra.cell.source.gainNode.gain.value===0&&rotra.loading.source.gainNode.gain.value===0) {
      this.hanger.fadeVolume(0.8,3);
      this.hasStartedHangerOnPause = true;
    }
  }

  unpause() {
    if (ChoreoGraph.Audio.mode!==ChoreoGraph.Audio.WEBAUDIO) { return "Not using WebAudio"; }
    this.cullOneshots();
    const fadeInTime = ChoreoGraph.Audio.ctx.currentTime + 0.7;
    for (const oneshot of this.oneshots) {
      oneshot.source.playbackRate.cancelScheduledValues(ChoreoGraph.Audio.ctx.currentTime);
      oneshot.source.playbackRate.setValueAtTime(oneshot.source.playbackRate.value, ChoreoGraph.Audio.ctx.currentTime);
      oneshot.source.playbackRate.linearRampToValueAtTime(1, fadeInTime);
    }

    if (this.hasStartedHangerOnPause) {
      this.hanger.fadeVolume(0,5);
    }
  }

  load() {
    for (const key in this.files) {
      cg.Audio.createSound({
        source : this.files[key]
      },key);
    }

    this.outside = cg.Audio.sounds.outside.play({
      allowBuffer : true,
      loop : true,
      volume : this.track===0 ? 1 : 0,
      fadeIn : 8
    });

    this.hanger = cg.Audio.sounds.hanger.play({
      allowBuffer : true,
      loop : true,
      volume : 0
    });

    this.cell = cg.Audio.sounds.cellLoop.play({
      allowBuffer : true,
      loop : true,
      volume : 0
    });

    this.loading = cg.Audio.sounds.loadLoop.play({
      allowBuffer : true,
      loop : true,
      volume : 0
    });
  }
}

rotra.load();

cg.createEvent({
  end : () => {
    rotra.trigger("load");
  },
  loop : true,
  duration : 500
});

/** @param {cgObjectAnimator} Animator */
function findNextAnimation(Animator) {
  const prev = Animator.animation.id;
  let output = false;

  if (prev==="l0bd") { output="probe_f"; }
  else if (prev==="l0fd") { output = "probe_b"; }
  else if (prev==="l1bd") { output = "probe_b"; }
  else if (prev==="l1fd") { output = "probe_f"; }
  else if (prev==="l2bd") { output = "probe_b"; }
  else if (prev==="l2fd") { output = "probe_f"; }
  else if (prev==="l3bd") { output = "probe_b"; }
  else if (prev==="l3fd") { output = "probe_f"; }
  else if (prev==="l0fr") { output = null; }
  else if (prev==="l0br") { output = null; }
  else if (prev==="l1fr") { output = null; }
  else if (prev==="l1br") { output = null; }
  else if (prev==="l2fr") { output = null; }
  else if (prev==="l2br") { output = null; }
  else if (prev==="l3fr") { output = null; }
  else if (prev==="l3br") { output = null; }
  else if (prev==="q0-rep0") { output = null; }
  else if (prev==="q0-rep1") { output = null; }
  else if (prev==="q1-q0") { output = null; }
  else if (prev==="q2-q1") { output = null; }
  else if (prev==="q3-q2") { output = null; }
  else if (prev==="q4-q3") { output = null; }
  else if (prev==="q5-q4") { output = null; }
  else if (prev==="q6-q5") { output = null; }
  else if (prev==="q7-q6") { output = null; }
  else if (prev==="q8-q7") { output = null; }
  else if (prev==="q9-q8") { output = null; }
  else if (prev=="add"&&Animator.object===disco.addFV) { output = "add_wait_b-f"; }
  else if (prev=="add") { output = null; }
  else if (prev=="add_wait_b-f") { output = null; }
  else if (prev=="add_wait_f-q3") { output = null; }
  else if (prev=="remove") {
    output = null;
    Animator.object.inStorage = true;
    Animator.object.scene = "STORAGE";
  } else if (prev=="bb80_to_on") { output = "bb80_on"; }
  else if (prev=="bb80_to_off") { output = "bb80_off"; }
  else if (prev=="bb81_to_on") { output = "bb81_on"; }
  else if (prev=="bb81_to_off") { output = "bb81_off"; }
  else if (prev=="bb80_off"&&preshows.rrnbb8Onstage) { output = "bb80_to_on"; }
  else if (prev=="bb81_off"&&preshows.rrsbb8Onstage) { output = "bb81_to_on"; }
  else if (prev=="bb80_on"&&!preshows.rrnbb8Onstage) { output = "bb80_to_off"; }
  else if (prev=="bb81_on"&&!preshows.rrsbb8Onstage) { output = "bb81_to_off"; }
  else if (prev=="clone_atat_f") {
    Animator.object.transform.x = -100;
  } else if (prev=="clone_atat_b") {
    Animator.object.transform.x = -100;
  } else if (prev==="probe_f") {
    output = "unauthorized_l";
    vehicleResync.unauthorized_l_V = Animator.object;
  } else if (prev==="probe_b") {
    output = "unauthorized_r";
    vehicleResync.unauthorized_r_V = Animator.object;
  } else if (prev==="atat_f") {
    output = "up0_l";
    vehicleResync.up0_l_V = Animator.object;
  } else if (prev==="atat_b") {
    output = "up0_r";
    vehicleResync.up0_r_V = Animator.object;
  } else if (prev==="bridge_hallway_l") {
    output = "bridge_l";
    vehicleResync.bridge_l_V = Animator.object;
  } else if (prev==="bridge_hallway_r") {
    output = "bridge_r";
    vehicleResync.bridge_r_V = Animator.object;
  } else if (prev==="sirens_l") {
    output = "turbo_elevator_l";
    vehicleResync.turbo_elevator_l_V = Animator.object;
  } else if (prev==="sirens_r") {
    output = "turbo_elevator_r";
    vehicleResync.turbo_elevator_r_V = Animator.object;
  } else if (prev==="light_saber_l") {
    output = "cannon_f";
  } else if (prev==="light_saber_r") {
    output = "cannon_b";
  } else if (prev==="cannon_f") {
    output = "cannon_f_wait";
    vehicleResync.cannon_f_wait_V = Animator.object;
  } else if (prev==="cannon_b") {
    output = "cannon_b_wait";
    vehicleResync.cannon_b_wait_V = Animator.object;
  } else if (prev==="cannon_f_aMode") {
    output = "hallway_f";
  } else if (prev==="cannon_b_aMode") {
    output = "hallway_b";
  } else if (prev==="cannon_f_bMode") {
    output = "hallway_f";
  } else if (prev==="cannon_b_bMode") {
    output = "hallway_b";
  } else if (prev==="hallway_f") {
    output = "kylo_wait_l";
    vehicleResync.kylo_wait_l_V = Animator.object;
  } else if (prev==="hallway_b") {
    output = "kylo_wait_r";
    vehicleResync.kylo_wait_r_V = Animator.object;
  } else if (prev==="kylo_a_l") {
    output = "kylo_a_force_wait_l";
    vehicleResync.kylo_a_force_wait_l_V = Animator.object;
  } else if (prev==="kylo_a_r") {
    output = "kylo_a_force_wait_r";
    vehicleResync.kylo_a_force_wait_r_V = Animator.object;
  } else if (prev=="kylo_a_force_l") {
    output = "pod_transition_f";
  } else if (prev=="kylo_a_force_r") {
    output = "pod_transition_b";
  } else if (prev=="kylo_b_l") {
    output = "pod_transition_b";
  } else if (prev=="kylo_b_r") {
    output = "pod_transition_f";
  } else if (prev=="pod_transition_f"
    && resistance.nextEscapePodSide===resistance.ESCAPEPOD_LEFT) {
    output = "pod_enter_lf";
  } else if (prev=="pod_transition_b"
    && resistance.nextEscapePodSide===resistance.ESCAPEPOD_LEFT) {
    output = "pod_enter_lb";
    resistance.nextEscapePodSide = resistance.ESCAPEPOD_RIGHT;
  } else if (prev=="pod_transition_f"
    && resistance.nextEscapePodSide===resistance.ESCAPEPOD_RIGHT) {
    output = "pod_enter_rf";
  } else if (prev=="pod_transition_b"
    && resistance.nextEscapePodSide===resistance.ESCAPEPOD_RIGHT) {
    output = "pod_enter_rb";
    resistance.nextEscapePodSide = resistance.ESCAPEPOD_LEFT;
  } else if (prev=="pod_enter_rf") {
    output = "pod_door_rf";
    vehicleResync.pod_door_rf_V = Animator.object;
  } else if (prev=="pod_enter_rb") {
    output = "pod_door_rb";
    vehicleResync.pod_door_rb_V = Animator.object;
  } else if (prev=="pod_enter_lf") {
    output = "pod_door_lf";
    vehicleResync.pod_door_lf_V = Animator.object;
  } else if (prev=="pod_enter_lb") {
    output = "pod_door_lb";
    vehicleResync.pod_door_lb_V = Animator.object;
  } else if (prev=="pod_load_lf") {
    output = null;
    vehicleResync.pod_exit_wait_lf_V = Animator.object;
  } else if (prev=="pod_load_lb") {
    output = null;
    vehicleResync.pod_exit_wait_lb_V = Animator.object;
  } else if (prev=="pod_load_rf") {
    output = null;
    vehicleResync.pod_exit_wait_rf_V = Animator.object;
  } else if (prev=="pod_load_rb") {
    output = null;
    vehicleResync.pod_exit_wait_rb_V = Animator.object;
  } else if (prev=="pod_exit_lf"||prev=="pod_exit_rf") {
    if (resistance.unloadWaitFV===null||resistance.unload1VR===null||resistance.unload2VR===null) {
      output = "bypass_crashsite_wait_f";
    } else {
      output = "stop_at_crashsite_wait_f";
      resistance.crashSiteFV = Animator.object;
    }
  } else if (prev=="stop_at_crashsite_wait_f") {
    vehicleResync.crashSiteFV = Animator.object;
    output = null;
  } else if (prev=="bypass_crashsite_wait_f"||prev==="start_from_crashsite_wait_f") {
    output = "crashsite-unload_wait_f";
  } else if (prev=="pod_exit_lb"||prev=="pod_exit_rb") {
    if (resistance.unloadWaitBV===null||resistance.unload1VL===null||resistance.unload2VL===null) {
      output = "bypass_crashsite_wait_b";
    } else {
      output = "stop_at_crashsite_wait_b";
      resistance.crashSiteBV = Animator.object;
    }
  } else if (prev=="stop_at_crashsite_wait_b") {
    vehicleResync.crashSiteBV = Animator.object;
    output = null;
  } else if (prev==="bypass_crashsite_wait_b"||prev==="start_from_crashsite_wait_b") {
    output = "crashsite-unload_wait_b";
  } else if (prev==="crashsite-unload_wait_f") {
    if (resistance.unload1VR===null||resistance.unload2VR===null) {
      output = "bypass_unload_wait_f";
    } else {
      output = "stop_at_unload_wait_f";
      resistance.unloadWaitFV = Animator.object;
    }
  } else if (prev=="stop_at_unload_wait_f") {
    vehicleResync.unloadWaitFV = Animator.object;
    output = null;
  } else if (prev==="crashsite-unload_wait_b") {
    if (resistance.unload1VL===null||resistance.unload2VL===null) {
      output = "bypass_unload_wait_b";
    } else {
      output = "stop_at_unload_wait_b";
      resistance.unloadWaitBV = Animator.object;
    }
  } else if (prev=="stop_at_unload_wait_b") {
    vehicleResync.unloadWaitBV = Animator.object;
    output = null;
  } else if (prev=="bypass_unload_wait_f"||prev=="start_from_unload_wait_f") {
    if (resistance.unload2VR===null&&!(resistance.unload1VR===null&&resistance.unload1VL!==null)) {
      output = "to_unload_1";
      resistance.unload2VR = Animator.object;
    } else if (resistance.unload1VR===null) {
      output = "to_unload_3";
      resistance.unload1VR = Animator.object;
      resistance.preventDispatchUntil = cg.clock + 15000;
    }
  } else if (prev=="bypass_unload_wait_b"||prev=="start_from_unload_wait_b") {
    if (resistance.unload2VL===null&&!(resistance.unload1VL===null&&resistance.unload1VR!==null)) {
      output = "to_unload_0";
      resistance.unload2VL = Animator.object;
    } else if (resistance.unload1VL===null) {
      output = "to_unload_2";
      resistance.unload1VL = Animator.object;
    }
  } else if (prev=="to_unload_0"||prev=="to_unload_1") {
    output = null;
    if (resistance.unload2S===resistance.US_READY_FOR_NEW_VEHICLES) {
      resistance.unload2S = resistance.US_AWAITING_PAIR;
    } else if (resistance.unload2S===resistance.US_AWAITING_PAIR) {
      const otherVehicle = resistance[prev==="to_unload_0"?"unload2VR":"unload2VL"];
      if (Animator.object.frontGuests.length>0||Animator.object.backGuests.length>0) {
        resistance.unload2S = resistance.US_READY_TO_UNLOCK;
      } else if (otherVehicle.frontGuests.length>0||otherVehicle.backGuests.length>0) {
        resistance.unload2S = resistance.US_READY_TO_UNLOCK;
      } else {
        resistance.unload2S = resistance.US_READY_TO_DISPATCH;
      }
    }
  } else if (prev=="to_unload_2"||prev=="to_unload_3") {
    output = null;
    if (resistance.unload1S===resistance.US_READY_FOR_NEW_VEHICLES) {
      resistance.unload1S = resistance.US_AWAITING_PAIR;
    } else if (resistance.unload1S===resistance.US_AWAITING_PAIR) {
      const otherVehicle = resistance[prev==="to_unload_2"?"unload1VR":"unload1VL"];
      if (Animator.object.frontGuests.length>0||Animator.object.backGuests.length>0) {
        resistance.unload1S = resistance.US_READY_TO_UNLOCK;
      } else if (otherVehicle.frontGuests.length>0||otherVehicle.backGuests.length>0) {
        resistance.unload1S = resistance.US_READY_TO_UNLOCK;
      } else {
        resistance.unload1S = resistance.US_READY_TO_DISPATCH;
      }
    }
  } else if (prev=="u0d"||prev=="u1d"||prev=="u2d"||prev=="u3d") {
    output = null;
    disco.return9V = Animator.object;
  }

  if (output !== false) {
    Animator.animation = output === null ? null : cg.Animation.animations[output];
    Animator.reset();
  }
}

for (let i=0;i<3;i++) {
  const anim = cg.Animation.animations["tblc_"+i];
  const x = anim.data[0][0];
  const y = anim.data[0][1];
  const r = anim.data[0][3];

  const tblc = cg.createObject({
    transformInit : {x:x,y:y,r:r}
  },`tblc_${i}`)
  .attach("Graphic",{
    collection : "midground",
    graphic : cg.graphics.cannon
  })
  .attach("Animator",{
    loop : false
  });

  cg.scenes.main.addObject(tblc);

  const blast = cg.createObject({
    transformInit : {parent:tblc.transform,x:-13,y:-20,o:0}
  },`tblc_blast_${i}`)
  .attach("Graphic",{
    collection : "midground",
    graphic : cg.graphics.blast
  })
  .attach("Animator",{
    loop : false
  });

  tblc.blast = blast;

  cg.scenes.main.addObject(blast);
}

cg.createObject({
  transformInit : {x:1361.19,y:65.93}
},"cannon_lights")
.attach("Graphic",{
  collection : "midground",
  graphic : cg.graphics.cannon_lights
})
.attach("Animator",{
  animation : cg.Animation.createAnimation({},"cannon_lights").loadRaw([[0,0],[0.1,1],[0.5,1],[0.8,0],[1,0]],[
    {keySet:"time"},
    {keySet:["transform","o"]}
  ]),
  loop : true
});

cg.scenes.main.addObject(cg.objects.cannon_lights);

const vehicleResync = new class VehicleResync {
  unauthorized_l_V = null;
  unauthorized_r_V = null;

  up0_l_V = null;
  up0_r_V = null;

  bridge_r_V = null;
  bridge_l_V = null;

  turbo_elevator_r_V = null;
  turbo_elevator_l_V = null;

  cannon_f_wait_V = null;
  cannon_b_wait_V = null;

  kylo_wait_l_V = null;
  kylo_wait_r_V = null;

  kylo_a_force_wait_l_V = null;
  kylo_a_force_wait_r_V = null;

  pod_door_rf_V = null;
  pod_door_rb_V = null;

  pod_door_lf_V = null;
  pod_door_lb_V = null;

  pod_exit_wait_lf_V = null;
  pod_exit_wait_lb_V = null;

  pod_exit_wait_rf_V = null;
  pod_exit_wait_rb_V = null;

  crashSiteFV = null;
  crashSiteBV = null;

  unloadWaitFV = null;
  unloadWaitBV = null;

  update() {
    if (vehicleResync.unauthorized_l_V!==null && vehicleResync.unauthorized_r_V !== null) {
      vehicleResync.unauthorized_l_V.Animator.animation = cg.Animation.animations.atat_b;
      vehicleResync.unauthorized_r_V.Animator.animation = cg.Animation.animations.atat_f;
      vehicleResync.unauthorized_l_V = null;
      vehicleResync.unauthorized_r_V = null;
    }
    if (vehicleResync.up0_l_V!==null && vehicleResync.up0_r_V !== null) {
      vehicleResync.up0_l_V.Animator.animation = cg.Animation.animations.bridge_hallway_l;
      vehicleResync.up0_r_V.Animator.animation = cg.Animation.animations.bridge_hallway_r;
      if (rotr.lsbsVehicle!==null
        && (
          rotr.lsbsVehicle.number===vehicleResync.up0_l_V.number
          || rotr.lsbsVehicle.number===vehicleResync.up0_r_V.number
        )) {
        cg.graphics.lsbsMap.isUp = true;
      }
      vehicleResync.up0_l_V = null;
      vehicleResync.up0_r_V = null;
    }
    if (vehicleResync.bridge_l_V!==null && vehicleResync.bridge_r_V !== null) {
      vehicleResync.bridge_l_V.Animator.animation = cg.Animation.animations.sirens_l;
      vehicleResync.bridge_r_V.Animator.animation = cg.Animation.animations.sirens_r;
      vehicleResync.bridge_l_V = null;
      vehicleResync.bridge_r_V = null;
    }
    if (vehicleResync.turbo_elevator_l_V!==null && vehicleResync.turbo_elevator_r_V !== null) {
      vehicleResync.turbo_elevator_l_V.Animator.animation = cg.Animation.animations.light_saber_l;
      vehicleResync.turbo_elevator_r_V.Animator.animation = cg.Animation.animations.light_saber_r;
      vehicleResync.turbo_elevator_l_V = null;
      vehicleResync.turbo_elevator_r_V = null;
    }
    if (vehicleResync.cannon_f_wait_V!==null && vehicleResync.cannon_b_wait_V !== null) {
      vehicleResync.cannon_f_wait_V.Animator.animation = cg.Animation.animations[`cannon_f_${rotr.effects.cannons}Mode`];
      vehicleResync.cannon_b_wait_V.Animator.animation = cg.Animation.animations[`cannon_b_${rotr.effects.cannons}Mode`];
      vehicleResync.cannon_f_wait_V = null;
      vehicleResync.cannon_b_wait_V = null;
    }
    if (vehicleResync.kylo_wait_l_V !==null && vehicleResync.kylo_wait_r_V !== null) {
      vehicleResync.kylo_wait_l_V.Animator.animation = cg.Animation.animations[`kylo_${rotr.effects.kylo}_l`];
      vehicleResync.kylo_wait_r_V.Animator.animation = cg.Animation.animations[`kylo_${rotr.effects.kylo}_r`];
      vehicleResync.kylo_wait_l_V = null;
      vehicleResync.kylo_wait_r_V = null;
    }
    if (vehicleResync.kylo_a_force_wait_l_V !==null && vehicleResync.kylo_a_force_wait_r_V !== null) {
      vehicleResync.kylo_a_force_wait_l_V.Animator.animation = cg.Animation.animations.kylo_a_force_l;
      vehicleResync.kylo_a_force_wait_r_V.Animator.animation = cg.Animation.animations.kylo_a_force_r;
      vehicleResync.kylo_a_force_wait_l_V = null;
      vehicleResync.kylo_a_force_wait_r_V = null;
    }
    if (vehicleResync.pod_door_rf_V !==null
      && vehicleResync.pod_door_rb_V !== null
      && resistance.rightEscapePodsUp) {
      vehicleResync.pod_door_rf_V.Animator.animation = cg.Animation.animations.pod_load_rf;
      vehicleResync.pod_door_rb_V.Animator.animation = cg.Animation.animations.pod_load_rb;
      vehicleResync.pod_door_rf_V.BlockController.group = null;
      vehicleResync.pod_door_rb_V.BlockController.group = null;
      vehicleResync.pod_door_rf_V = null;
      vehicleResync.pod_door_rb_V = null;
    }
    if (vehicleResync.pod_door_lf_V !==null
      && vehicleResync.pod_door_lb_V !== null
      && resistance.leftEscapePodsUp) {
      vehicleResync.pod_door_lf_V.Animator.animation = cg.Animation.animations.pod_load_lf;
      vehicleResync.pod_door_lb_V.Animator.animation = cg.Animation.animations.pod_load_lb;
      vehicleResync.pod_door_lf_V.BlockController.group = null;
      vehicleResync.pod_door_lb_V.BlockController.group = null;
      vehicleResync.pod_door_lf_V = null;
      vehicleResync.pod_door_lb_V = null;
    }
    if (vehicleResync.crashSiteFV !== null && resistance.unloadWaitFV === null) {
      vehicleResync.crashSiteFV.Animator.animation = cg.Animation.animations.start_from_crashsite_wait_f;
      vehicleResync.crashSiteFV = null;
      resistance.crashSiteFV = null;
    }
    if (vehicleResync.crashSiteBV !== null && resistance.unloadWaitBV === null) {
      vehicleResync.crashSiteBV.Animator.animation = cg.Animation.animations.start_from_crashsite_wait_b;
      vehicleResync.crashSiteBV = null;
      resistance.crashSiteBV = null;
    }
    if (vehicleResync.unloadWaitFV !== null
      && (resistance.unload1VR === null || resistance.unload2VR === null)
    ) {
      vehicleResync.unloadWaitFV.Animator.animation = cg.Animation.animations.start_from_unload_wait_f;
      vehicleResync.unloadWaitFV = null;
      resistance.unloadWaitFV = null;
    }
    if (vehicleResync.unloadWaitBV !== null
      && (resistance.unload1VL === null || resistance.unload2VL === null)
    ) {
      vehicleResync.unloadWaitBV.Animator.animation = cg.Animation.animations.start_from_unload_wait_b;
      vehicleResync.unloadWaitBV = null;
      resistance.unloadWaitBV = null;
    }

    function unloadWaitPositionAvailable() {
      return (
        vehicleResync.crashSiteFV === null
        && vehicleResync.crashSiteBV === null
        && resistance.lastPodExitTime + resistance.posExitBufferDuration < cg.clock
      )
    }

    if (vehicleResync.pod_exit_wait_lf_V !== null && vehicleResync.pod_exit_wait_lb_V !== null
      && resistance.escapePodsLeftExitTime < cg.clock
      && unloadWaitPositionAvailable()) {
      vehicleResync.pod_exit_wait_lf_V.Animator.animation = cg.Animation.animations.pod_exit_lf;
      vehicleResync.pod_exit_wait_lb_V.Animator.animation = cg.Animation.animations.pod_exit_lb;
      resistance.escapePodsLeftExitTime = Infinity;
      resistance.lastPodExitTime = cg.clock;
      if (rotr.lsbsVehicle!==null
        && (
          rotr.lsbsVehicle.number===vehicleResync.pod_exit_wait_lf_V.number
          || rotr.lsbsVehicle.number===vehicleResync.pod_exit_wait_lb_V.number
        )) {
        cg.graphics.lsbsMap.isUp = false;
      }
      vehicleResync.pod_exit_wait_lf_V = null;
      vehicleResync.pod_exit_wait_lb_V = null;
    }
    if (vehicleResync.pod_exit_wait_rf_V !== null && vehicleResync.pod_exit_wait_rb_V !== null
      && resistance.escapePodsRightExitTime < cg.clock
      && unloadWaitPositionAvailable()) {
      vehicleResync.pod_exit_wait_rf_V.Animator.animation = cg.Animation.animations.pod_exit_rf;
      vehicleResync.pod_exit_wait_rb_V.Animator.animation = cg.Animation.animations.pod_exit_rb;
      resistance.escapePodsRightExitTime = Infinity;
      resistance.lastPodExitTime = cg.clock;
      if (rotr.lsbsVehicle!==null
        && (
          rotr.lsbsVehicle.number===vehicleResync.pod_exit_wait_rf_V.number
          || rotr.lsbsVehicle.number===vehicleResync.pod_exit_wait_rb_V.number
        )) {
        cg.graphics.lsbsMap.isUp = false;
      }
      vehicleResync.pod_exit_wait_rf_V = null;
      vehicleResync.pod_exit_wait_rb_V = null;
    }
  }
}

cg.createEvent({
  duration : 30,
  loop : true,
  end : vehicleResync.update
},"vehicleResync")

const guestVehicleLocations = [
  [-7.5,-3],[-2.5,-3],[2.5,-3],[7.5,-3],
  [-7.5,4],[-2.5,4],[2.5,4],[7.5,4]
];

cg.graphicTypes.vehicle = {
  setup() {
    this.colour = "red";
    this.seatOccupancy = [false,false,false,false,false,false,false,false];
  },
  /** @param {CanvasRenderingContext2D} c @param {number} ax @param {number} ay @param {cgCanvas} canvas  */
  draw(c,ax,ay,canvas) {
    canvas.drawImage(cg.images["vehicle_"+this.colour],0,0,30,30);

    c.fillStyle = "#cfcfcf";
    c.beginPath();
    for (let i=0;i<guestVehicleLocations.length;i++) {
      if (!this.seatOccupancy[i]) continue;
      const seat = guestVehicleLocations[i];
      c.moveTo(seat[0],seat[1]);
      c.arc(seat[0],seat[1],2,0,Math.PI*2);
    }
    c.fill();
  }
}

cg.createImage({file:"vehicle_red.png"},"vehicle_red");
cg.createImage({file:"vehicle_orange.png"},"vehicle_orange");
cg.createImage({file:"vehicle_blue.png"},"vehicle_blue");
cg.createImage({file:"vehicle_grey.png"},"vehicle_grey");

const vehicles = {};

(()=>{
  const vehicleStartPriority = [1,2,3,7,8,9,10,11,15,16,17,18,19,23,24,25,26,27,31,32,33,34,35,4,5,6,12,13,14,20,21,22,28,29,30,36,37,38];

  const positions = {};
  for (const posName in disco.discoPositions) {
    positions[posName] = disco.discoPositions[posName];
  }
  for (const posName in resistance.resistancePositions) {
    positions[posName] = resistance.resistancePositions[posName];
  }

  for (let i=1;i<=38;i++) {
    let colour;
    if (i<=10) {
      colour = "red";
    } else if (i<=20) {
      colour = "orange";
    } else if (i<=30) {
      colour = "blue";
    } else {
      colour = "grey";
    }

    const graphic = cg.createGraphic({
      type : "vehicle",
      colour : colour
    },"vehicle_" + i);

    vehicles[i] = cg.createObject({
      transformInit : {x:-50}
    },"vehicle_" + i)
    .attach("Graphic",{
      collection : "vehicles",
      graphic : graphic
    })
    .attach("Script",{updateScript:(object)=>{
      if (object.inStorage&&object.storageTag===STORAGE_TAGS.SHOW&&disco.lastVehicleAddTime+disco.vehicleAddBufferDuration < cg.clock) {
        if (disco.addFV===null&&disco.addBV===null) {
          disco.addFV = object;
        } else if (disco.addBV===null&&disco.addFV!==null) {
          disco.addBV = object;
        } else {
          return;
        }
        disco.lastVehicleAddTime = cg.clock;
        object.inStorage = false;
        object.Animator.animation = cg.Animation.animations.add;
        object.scene = "RETURN";
      }
    }})
    .attach("Animator")
    .attach("BlockController",{
      group : null
    });
    vehicles[i].Animator.triggerTypes.a = (trigger,object,animator) => {
      rotra.trigger(trigger[1]);
    }
    vehicles[i].Animator.onEnd = findNextAnimation;
    cg.scenes.main.addObject(vehicles[i]);

    vehicles[i].number = i;
    vehicles[i].frontGuests = [];
    vehicles[i].backGuests = [];

    vehicles[i].inStorage = true;
    vehicles[i].storageTag = STORAGE_TAGS.STORE;
    vehicles[i].scene = "STORAGE";
  }

  const sceneKeys = {
    load1VB : "8-1",
    load1VF : "8-1",
    load2VB : "8-2",
    load2VF : "8-2",
    load3VB : "8-3",
    load3VF : "8-3",
    load4VB : "8-4",
    load4VF : "8-4",
    unload1VL : "18",
    unload1VR : "18",
    unload2VL : "18",
    unload2VR : "18",
    unloadWaitFV : "18",
    unloadWaitBV : "18",
    replaceVL : "RETURN",
    replaceVR : "RETURN",
    return0V : "RETURN",
    return1V : "RETURN",
    return2V : "RETURN",
    return3V : "RETURN",
    return4V : "RETURN",
    return5V : "RETURN",
    return6V : "RETURN",
    return7V : "RETURN",
    return8V : "RETURN",
    return9V : "RETURN"
  };

  let addedVehicles = 0;
  for (const vehicleNumber of vehicleStartPriority) {
    const vehicle = vehicles[vehicleNumber];

    if (addedVehicles < Object.keys(positions).length) {
      const posName = Object.keys(positions)[addedVehicles];
      const pos = positions[posName];
      vehicle.transform.x = pos[0];
      vehicle.transform.y = pos[1];
      vehicle.transform.r = pos[2];
      vehicle.inStorage = false;
      vehicle.storageTag = STORAGE_TAGS.SHOW;

      vehicle.scene = sceneKeys[posName];

      (posName.includes("unload") ? resistance : disco)[posName] = vehicle;
      addedVehicles++;
    }
  }

  vehicleResync.unloadWaitBV = resistance.unloadWaitBV;
  vehicleResync.unloadWaitFV = resistance.unloadWaitFV;
})()

cg.createObject({
  transformInit : {y:-50}
},"clone_f")
.attach("Graphic",{
  collection : "vehicles",
  graphic : cg.createGraphic({
    type : "vehicle",
    colour : "red"
  },"clone_f")
})
.attach("Animator",{
  animation : cg.Animation.animations.clone_atat_f,
  paused : true,
  loop : false,
  onEnd : findNextAnimation
});

cg.createObject({
  transformInit : {y:-50}
},"clone_b")
.attach("Graphic",{
  collection : "vehicles",
  graphic : cg.createGraphic({
    type : "vehicle",
    colour : "red"
  },"clone_b")
})
.attach("Animator",{
  animation : cg.Animation.animations.clone_atat_b,
  paused : true,
  loop : false,
  onEnd : findNextAnimation
});

cg.scenes.main.addObject(cg.objects.clone_f);
cg.scenes.main.addObject(cg.objects.clone_b);

cg.createObject({
  transformInit : {x:498.44,y:202.09,r:95}
},"hanger_vehicle")
.attach("Graphic",{
  collection : "vehicles",
  graphic : cg.createGraphic({
    type : "vehicle",
    colour : "red"
  },"hanger_vehicle")
})

cg.scenes.main.addObject(cg.objects.hanger_vehicle);

cg.createPath([[1594,97],[1566,130]],"turbovatorLeftEnter");

cg.createGraphic({
  type : "door",
  left : cg.paths.turbovatorLeftEnter[0],
  right : cg.paths.turbovatorLeftEnter[1]
},"turbovatorLeftEnter");

cg.scenes.main.createItem("graphic",{
  graphic : cg.graphics.turbovatorLeftEnter
},"turbovatorLeftEnter","foreground");

cg.createPath([[1551,58],[1522,87]],"turbovatorLeftExit");

cg.createGraphic({
  type : "door",
  left : cg.paths.turbovatorLeftExit[0],
  right : cg.paths.turbovatorLeftExit[1]
},"turbovatorLeftExit");

cg.scenes.main.createItem("graphic",{
  graphic : cg.graphics.turbovatorLeftExit
},"turbovatorLeftExit","foreground");

cg.createPath([[1621,17],[1614,60.5]],"turbovatorRightEnter");

cg.createGraphic({
  type : "door",
  left : cg.paths.turbovatorRightEnter[0],
  right : cg.paths.turbovatorRightEnter[1]
},"turbovatorRightEnter");

cg.scenes.main.createItem("graphic",{
  graphic : cg.graphics.turbovatorRightEnter
},"turbovatorRightEnter","foreground");

cg.createPath([[1563.5,8],[1557,46]],"turbovatorRightExit");

cg.createGraphic({
  type : "door",
  left : cg.paths.turbovatorRightExit[0],
  right : cg.paths.turbovatorRightExit[1]
},"turbovatorRightExit");

cg.scenes.main.createItem("graphic",{
  graphic : cg.graphics.turbovatorRightExit
},"turbovatorRightExit","foreground");

cg.createGraphic({
  type : "arc",
  colour : "#db2b10",
  radius : 1
},"cut_roof")

cg.createObject({
  transformInit : {x:-100}
},"cut_roof_r")
.attach("Graphic",{
  graphic : cg.graphics.cut_roof,
  collection : "midground"
})
.attach("Animator",{
  animation : cg.Animation.animations.cut_roof_r_wait,
  onEnd : (Animator) => {
    Animator.animation = cg.Animation.animations.cut_roof_r_wait;
    Animator.object.transform.y = -50;
  }
});

cg.createObject({
  transformInit : {x:-100}
},"cut_roof_l")
.attach("Graphic",{
  graphic : cg.graphics.cut_roof,
  collection : "midground"
})
.attach("Animator",{
  animation : cg.Animation.animations.cut_roof_l_wait,
  onEnd : (Animator) => {
    Animator.animation = cg.Animation.animations.cut_roof_l_wait;
    Animator.object.transform.y = -50;
  }
});

cg.scenes.main.addObject(cg.objects.cut_roof_l);
cg.scenes.main.addObject(cg.objects.cut_roof_r);

cg.callbacks.listen("input","keyDown",(key)=>{
  if (key==="f") {
    vehicleResync.turbo_elevator_l_V = vehicles[1];
    vehicleResync.turbo_elevator_r_V = vehicles[2];
  }
})